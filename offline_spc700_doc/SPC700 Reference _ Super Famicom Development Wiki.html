<!DOCTYPE html>
<!-- saved from url=(0089)https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./SPC700 Reference _ Super Famicom Development Wiki_files/analytics.js.download" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app58.us.archive.org';v.server_ms=667;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="./SPC700 Reference _ Super Famicom Development Wiki_files/playback.bundle.js.download" charset="utf-8"></script>
<script type="text/javascript" src="./SPC700 Reference _ Super Famicom Development Wiki_files/wombat.js.download" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("https://wiki.superfamicom.org//spc700-reference","20200518093038","https://web.archive.org/web/","web","/_static/",
	      "1589794238","wiki.superfamicom.org");
</script>
<link rel="stylesheet" type="text/css" href="./SPC700 Reference _ Super Famicom Development Wiki_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./SPC700 Reference _ Super Famicom Development Wiki_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->


<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SPC700 Reference | Super Famicom Development Wiki</title>

<meta property="og:type" content="article">
<meta name="twitter:card" content="summary">


<meta name="description" content="SPC700 Audio Processor Reference">
<meta property="og:description" content="SPC700 Audio Processor Reference">
<meta property="twitter:description" content="SPC700 Audio Processor Reference">



<meta property="og:title" content="SPC700 Reference">
<meta property="twitter:title" content="SPC700 Reference">



<meta property="og:site_name" content="Super Famicom Development Wiki">



<meta property="og:locale" content="en_US">





<meta name="twitter:site" content="@superfamicom">



<meta name="twitter:creator" content="@superfamicom">



<meta property="article:publisher" content="https://wiki.superfamicom.org">



<meta property="og:url" content="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org//spc700-reference">
<link rel="canonical" href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org//spc700-reference">






<meta property="article:modified_time" content="2019-04-11T03:00:22.942Z">
<meta property="og:updated_time" content="2019-04-11T03:00:22.942Z">


<link rel="stylesheet" href="./SPC700 Reference _ Super Famicom Development Wiki_files/css" media="all">
<link rel="stylesheet" href="./SPC700 Reference _ Super Famicom Development Wiki_files/style.css" media="all">

</head>
<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
</div><div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="./SPC700 Reference _ Super Famicom Development Wiki_files/donate.html" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(625,27,25,2,"web","https://wiki.superfamicom.org/spc700-reference","20200518093038",1996,"/_static/",["/_static/css/banner-styles.css?v=_99BHQfY","/_static/css/iconochive.css?v=qtvMKcIJ"]);
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
<header class="navbar" role="banner">
  <div class="background">
    <div class="container">
      <div class="navbar-header">
        <h2 class="navbar-brand">
          <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/" title="Super Famicom Development Wiki">SFC Development Wiki</a>
        </h2>
        <form role="search" method="get" name="search" class="navbar-form" action="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/search">
          <input type="text" aria-label="Search" value="" name="s" class="form-control search-query" placeholder="üîç Search Super Famicom Development Wiki">
        </form>
        <div class="navbar-button">
          <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/tags" class="button tags" title="Browse Document Tags">Browse Tags</a>
        </div>
        <div class="navbar-button">
          <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/new" class="button new-document" title="Create New Document">New Document</a>
        </div>
      </div>
    </div>
  </div>
</header>
<!-- View Object
{
    document = [document] Current document,
    title = [string] Current title,
    relatedDocuments = [array] Collection of related documents,
    recentDocuments = [array] Collection of recent documents,
    popularDocuments = [array] Collection of popular documents,
    config = [config] Global config
}
-->
<div class="before-main-wrapper">
  <div class="header-wrapper">
    <div class="container">
      <div class="header-titles">
        <h1>SPC700 Reference</h1>
        <a class="button" href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference/edit" title="Edit">‚úèÔ∏è Edit</a>
      </div>
    </div>
  </div>
</div>
<div class="container main-section detail">
  <div class="content">
    <div class="row">
      <main class="col-sm-12" role="main">
        <article>
          <div class="toc"><ul>
<li class="toc-li-0 toc-1"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-1">SPC-700</a></li>
<li class="toc-li-1 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-2">System Overview</a></li>
<li class="toc-li-2 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-3">SPC Memory Map and Registers</a></li>
<li class="toc-li-3 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-4">Opcode Matrices (by jwdonal)</a></li>
<li class="toc-li-4 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-5">Instruction Chart</a></li>
<li class="toc-li-5 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-6">CPU Instruction Set</a></li>
<li class="toc-li-6 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-7">DSP</a></li>
<li class="toc-li-7 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-8">IPL ROM</a></li>
<li class="toc-li-8 toc-2"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-9">Uploading Software</a></li>
<li class="toc-li-9 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-10">CPU</a></li>
<li class="toc-li-10 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-11">Memory</a></li>
<li class="toc-li-11 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-12">Communication</a></li>
<li class="toc-li-12 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-13">Sound</a></li>
<li class="toc-li-13 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-14">Timers</a></li>
<li class="toc-li-14 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-15">Registers</a></li>
<li class="toc-li-15 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-16">Communication Ports</a></li>
<li class="toc-li-16 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-17">DSP Access</a></li>
<li class="toc-li-17 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-18">Timers</a></li>
<li class="toc-li-18 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-19">CPU Register Set</a></li>
<li class="toc-li-19 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-20">CPU Program Status Word</a></li>
<li class="toc-li-20 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-21">SPC700 Opcode Matrix by Type (Native Mnemonics)</a></li>
<li class="toc-li-21 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-22">SPC700 Opcode Matrix by Type (65816-Style Mnemonics)</a></li>
<li class="toc-li-22 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-23">SPC700 Opcode Matrix by Addressing Mode (Native Mnemonics)</a></li>
<li class="toc-li-23 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-24">SPC700 Opcode Matrix by Addressing Mode (65816-Style Mnemonics)</a></li>
<li class="toc-li-24 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-25">SPC700 Opcode Matrix by Bits (Native Mnemonics)</a></li>
<li class="toc-li-25 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-26">SPC700 Opcode Matrix by Bits (65816-Style Mnemonics)</a></li>
<li class="toc-li-26 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-27">SPC700 Addressing Modes Effective Address Regions</a></li>
<li class="toc-li-27 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-28">8-bit Data Transmission (Read)</a></li>
<li class="toc-li-28 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-29">8-bit Data Transmission (Write)</a></li>
<li class="toc-li-29 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-30">8-bit Data Transmission (Reg-&gt;Reg, Mem-&gt;Mem)</a></li>
<li class="toc-li-30 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-31">8-bit Arithmetic</a></li>
<li class="toc-li-31 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-32">8-bit Logical Operations</a></li>
<li class="toc-li-32 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-33">8-bit Increment / Decrement Operations</a></li>
<li class="toc-li-33 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-34">8-bit Shift / Rotation Operations</a></li>
<li class="toc-li-34 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-35">16-bit Data Transmission Operations</a></li>
<li class="toc-li-35 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-36">16-bit Arithmetic Operations</a></li>
<li class="toc-li-36 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-37">Multiplication / Division Operations</a></li>
<li class="toc-li-37 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-38">Decimal Compensation Operations</a></li>
<li class="toc-li-38 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-39">Program Flow Operations</a></li>
<li class="toc-li-39 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-40">Subroutine Operations</a></li>
<li class="toc-li-40 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-41">Stack Operations</a></li>
<li class="toc-li-41 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-42">Bit Operations</a></li>
<li class="toc-li-42 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-43">PSW Operations</a></li>
<li class="toc-li-43 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-44">Other Commands</a></li>
<li class="toc-li-44 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-45">Special Notes</a></li>
<li class="toc-li-45 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-46">Bit Rate Reduction (BRR)</a></li>
<li class="toc-li-46 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-47">DSP Register Map</a></li>
<li class="toc-li-47 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-48">DSP Voice Register: VOL</a></li>
<li class="toc-li-48 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-49">DSP Voice Register: P</a></li>
<li class="toc-li-49 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-50">DSP Voice Register: SRCN</a></li>
<li class="toc-li-50 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-51">DSP Voice Register: ADSR</a></li>
<li class="toc-li-51 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-52">DSP Voice Register: GAIN</a></li>
<li class="toc-li-52 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-53">DSP Voice Register: ENVX</a></li>
<li class="toc-li-53 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-54">DSP Voice Register: OUTX</a></li>
<li class="toc-li-54 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-55">DSP Register: MVOL/EVOL</a></li>
<li class="toc-li-55 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-56">DSP Registers: KON/KOF</a></li>
<li class="toc-li-56 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-57">DSP Register: FLG</a></li>
<li class="toc-li-57 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-58">DSP Register: ENDX</a></li>
<li class="toc-li-58 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-59">DSP Register: EFB</a></li>
<li class="toc-li-59 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-60">DSP Register: PMON</a></li>
<li class="toc-li-60 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-61">DSP Register: NON</a></li>
<li class="toc-li-61 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-62">DSP Register: EON</a></li>
<li class="toc-li-62 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-63">DSP Register: DIR</a></li>
<li class="toc-li-63 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-64">DSP Register: ESA</a></li>
<li class="toc-li-64 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-65">DSP Register: EDL</a></li>
<li class="toc-li-65 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-66">DSP Register: COEF</a></li>
<li class="toc-li-66 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-67">DSP Echo Function</a></li>
<li class="toc-li-67 toc-3"><a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference#toc-68">Precautions</a></li></ul></div>
          <h1 id="toc-1">SPC-700</h1>
<h2 id="toc-2">System Overview</h2>
<h3 id="toc-10">CPU</h3>
<p>8-bit SPC700, runs at ~1Mhz ...with the effective speed being half (each instruction takes a minimum of 2 cycles)</p>
<h3 id="toc-11">Memory</h3>
<p>64KB (NOT 32KB), shared with everything.</p>
<h3 id="toc-12">Communication</h3>
<p>4 8-bit I/O ports to transfer data to/from the SNES.</p>
<h3 id="toc-13">Sound</h3>
<p>8x channels of ADPCM compressed sample goodness. The DSP also has special hardware for echo effects, white noise, and pitch modulation.</p>
<h3 id="toc-14">Timers</h3>
<p>Two 8-bit 8KHz timers + one more 8-bit 64KHz timer, all have 4-bit count-up values.</p>
<h2 id="toc-3">SPC Memory Map and Registers</h2>
<table>
<thead>
<tr>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0000 - 00EF</code></td>
<td>Page 0</td>
</tr>
<tr>
<td><code>00F0 - 00FF</code></td>
<td>Registers</td>
</tr>
<tr>
<td><code>0100 - 01FF</code></td>
<td>Page 1</td>
</tr>
<tr>
<td><code>0200 - FFBF</code></td>
<td>Memory</td>
</tr>
<tr>
<td><code>FFC0 - FFFF</code></td>
<td>Memory (read / write)</td>
</tr>
<tr>
<td><code>FFC0 - FFFF</code></td>
<td>Memory (write only)<code>*</code></td>
</tr>
<tr>
<td><code>FFC0 - FFFF</code></td>
<td>64 byte IPL ROM (read only)<code>*</code></td>
</tr>
</tbody>
</table>
<p><code>*</code> <em>Only if X bit is set in the undocumented register</em>.</p>
<p>Pages 0/1 are known as the "Zero Pages". Accesses to zero page memory can be done with faster (and smaller) cpu instructions (one byte addresses). Which zero page to be operated on can be switched with a processor flag. Page 1 is mainly used for stack space.</p>
<h3 id="toc-15">Registers</h3>
<table>
<thead>
<tr>
<th>Mnemonic</th>
<th>Description</th>
<th>Control</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>F0</code></td>
<td>Undocumented</td>
<td><code>?/W</code></td>
</tr>
<tr>
<td><code>F1</code></td>
<td>Control Register</td>
<td><code> /W</code></td>
</tr>
<tr>
<td><code>F2</code></td>
<td>DSP Register Address</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F3</code></td>
<td>DSP Register Data</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F4</code></td>
<td>Port 0</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F5</code></td>
<td>Port 1</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F6</code></td>
<td>Port 2</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F7</code></td>
<td>Port 3</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F8</code></td>
<td>Regular Memory</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>F9</code></td>
<td>Regular Memory</td>
<td><code>R/W</code></td>
</tr>
<tr>
<td><code>FA</code></td>
<td>Timer-0</td>
<td><code> /W</code></td>
</tr>
<tr>
<td><code>FB</code></td>
<td>Timer-1</td>
<td><code> /W</code></td>
</tr>
<tr>
<td><code>FC</code></td>
<td>Timer-2</td>
<td><code> /W</code></td>
</tr>
<tr>
<td><code>FD</code></td>
<td>Counter-0</td>
<td><code>R/ </code></td>
</tr>
<tr>
<td><code>FE</code></td>
<td>Counter-1</td>
<td><code>R/ </code></td>
</tr>
<tr>
<td><code>FF</code></td>
<td>Counter-2</td>
<td><code>R/ </code></td>
</tr>
</tbody>
</table>
<h4>Control Register</h4>
<pre><code class="hljs javascript">       <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
    +-----+-----+-----+-----+-----+-----+-----+-----+
 F1 |  -  |  -  | PC32| PC10|  -  | ST2 | ST1 | ST0 | Control, Write only!
    +-----+-----+-----+-----+-----+-----+-----+-----+

PC32: <span class="hljs-string">"PORT CLEAR"</span> Writing <span class="hljs-string">'1'</span> here will reset input <span class="hljs-keyword">from</span> ports <span class="hljs-number">2</span> &amp; <span class="hljs-number">3.</span> (reset to zero)
PC10: <span class="hljs-string">"PORT CLEAR"</span> Writing <span class="hljs-string">'1'</span> here will reset input <span class="hljs-keyword">from</span> ports <span class="hljs-number">0</span> &amp; <span class="hljs-number">1.</span>
STx:  Writing <span class="hljs-string">'1'</span> here will activate timer X, writing <span class="hljs-string">'0'</span> disables the timer.
</code></pre>
<p>There will probably be some conflict if the snes writes data at the same time the SPC initiates a port clear function.</p>
<p><strong>Some emulators don't emulate this, BSNES does though.</strong></p>
<p>Writing to the control register will ALWAYS reset active timers. Control is not readable. Writing '1' to any of the timer bits will start / restart the timer, even if it's already active, writing '0' will stop the timer. Even when using bit operations, the other timers will still be affected.</p>
<h3 id="toc-16">Communication Ports</h3>
<p>Basically there are actually 8-bytes of data passed around. The SNES uses registers <code>2140 - 2143</code>. The SPC uses registers <code>F4 - F7</code>.</p>
<pre><code class="hljs ruby">SNES SIDE               SPC SIDE

(write)                    (write)
-----&gt; $2140 ------------,    .-------- $F4 &lt;-----
-----&gt; $2141 ----------, <span class="hljs-params">|    |</span> .------ $F5 &lt;-----
-----&gt; $2142 --------, <span class="hljs-params">| |</span>    <span class="hljs-params">| |</span> .---- $F6 &lt;-----
-----&gt; $2143 ------, <span class="hljs-params">| |</span> <span class="hljs-params">|    |</span> <span class="hljs-params">| |</span> .-- $F7 &lt;-----
                   <span class="hljs-params">| |</span> <span class="hljs-params">| |</span>    <span class="hljs-params">| |</span> <span class="hljs-params">| |</span>
&lt;----- $2140 &lt;-----<span class="hljs-params">|-|</span>-<span class="hljs-params">|-|</span>----<span class="hljs-string">' | | |
&lt;----- $2141 &lt;-----|-|-|-|------'</span> <span class="hljs-params">| |</span>
&lt;----- $2142 &lt;-----<span class="hljs-params">|-|</span>-<span class="hljs-params">|-|</span>--------<span class="hljs-string">' |
&lt;----- $2143 &lt;-----|-|-|-|----------'</span>
 (read)            <span class="hljs-params">| |</span> <span class="hljs-params">| |</span>          (read)
                   <span class="hljs-params">| |</span> <span class="hljs-params">| `------------&gt; $F4 ------&gt;
                   |</span> <span class="hljs-params">| `--------------&gt; $F5 ------&gt;
                   |</span> <span class="hljs-string">`----------------&gt; $F6 ------&gt;
                   `</span>------------------&gt; $F7 ------&gt;
</code></pre>
<p>Hardware Quirk! When writing in 16-bit values to <code>2140</code> / <code>2141</code>, a noise pulse (or some technical thingy) may write data to <code>2143</code> too! Always write to <code>2140</code> / <code>2141</code> with 8-bit writes if this is undesired.</p>
<p>Another Warning! When a read from a port conflicts with a write to the port from the opposing CPU, the data may be garbled. Always re-fetch values that may be affected by this conflict!</p>
<p>Here is a fraction of code that handles the above conflict:</p>
<pre><code class="hljs armasm"><span class="hljs-comment">;-------------------------------------------------------------------</span>
<span class="hljs-symbol">comms_process</span>:
<span class="hljs-comment">;-------------------------------------------------------------------</span>

    <span class="hljs-keyword">mov </span>a, comms_v          <span class="hljs-comment">; COMMS_V is the last data written to port0</span>
    <span class="hljs-keyword">cmp </span>a, spc_port0        <span class="hljs-comment">; if the value in port0 is different, this means the SNES has sent new data.</span>
    <span class="hljs-keyword">beq </span>cp_exit             <span class="hljs-comment">; if its the same, then there are no messages.</span>

<span class="hljs-comment">; receive message</span>
    <span class="hljs-keyword">mov </span>a, spc_port1        <span class="hljs-comment">; PORT1 contains the message type</span>
    <span class="hljs-keyword">mov </span>comms_v, spc_port0  <span class="hljs-comment">; PORT0 should contain valid data now, since a few cycles have passed.</span>
    <span class="hljs-keyword">cmp </span>a, <span class="hljs-number">#20</span>h             <span class="hljs-comment">; determine message type... etc...</span>

    --PROCESS MESSAGE--

    <span class="hljs-keyword">mov </span>spc_port0, comms_v  <span class="hljs-comment">; mimic the value of port0 to let the SPC know we're finished,</span>
                            <span class="hljs-comment">; if the value is incorrect then the SNES will get caught in an infinite loop.</span>
</code></pre>
<p>Here is an unstable example that may crash:</p>
<pre><code class="hljs armasm"><span class="hljs-comment">;-------------------------------------------------------------------</span>
<span class="hljs-symbol">comms_process</span>:
<span class="hljs-comment">;-------------------------------------------------------------------</span>

    <span class="hljs-keyword">mov </span>a, spc_port0        <span class="hljs-comment">; check port0 for different data</span>
    <span class="hljs-keyword">cmp </span>a, comms_v          <span class="hljs-comment">; comms_v is last value</span>
    <span class="hljs-keyword">beq </span>cp_exit             <span class="hljs-comment">; if its the same, then there are no messages.</span>

<span class="hljs-comment">; receive message</span>
    <span class="hljs-keyword">mov </span>comms_v, a          <span class="hljs-comment">; save validation &lt;- THE DATA MAY BE GARBLED!</span>
    <span class="hljs-keyword">mov </span>a, spc_port1

    --PROCESS MESSAGE--

    <span class="hljs-keyword">mov </span>spc_port0, comms_v  <span class="hljs-comment">; mimic the value of port0 to let the blah blah blah. This</span>
                            <span class="hljs-comment">; data might be incorrect! It may hang-up the SNES side.</span>
</code></pre>
<h3 id="toc-17">DSP Access</h3>
<p>The DSP is accessed through 2 registers. One register points to a DSP register index. The other allows reading from / writing to the DSP register specified.</p>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$F2   <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">| DSP-Address, Read / Write
      +-----+-----+-----+-----+-----+-----+-----+-----+

x: Pointer to DSP register.

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$F3   |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span>  x  <span class="hljs-params">|  x  |</span> DSP-Data, Read / Write
      +-----+-----+-----+-----+-----+-----+-----+-----+

<span class="hljs-symbol">x:</span> Data to be written / data being read.
</code></pre>
<p>To write a value to the DSP:</p>
<ol>
<li>Write address of DSP register to <code>F2</code>.</li>
<li>Write desired value to <code>F3</code>.</li>
</ol>
<p>And to read a value:</p>
<ol>
<li>Write address of DSP register to <code>F2</code>.</li>
<li>Read the value from <code>F3</code>.</li>
</ol>
<p><code>F2</code> / <code>F3</code> can be written simultaneously with a 16-bit transfer:</p>
<pre><code class="hljs ruby">; Setting DSP register $00 to $25
; <span class="hljs-keyword">and</span> $01 to $30

    mov a, <span class="hljs-comment">#$00</span>
    mov y, <span class="hljs-comment">#$25</span>
    movw    $F2, ya
    inc a
    mov y, <span class="hljs-comment">#$30</span>
    movw    $F2, ya

; theres a few possibilities to write data to the DSP...
; spc has some mem-&gt;mem / mem-&gt;imm instructions too.
    inc $F2     ; set register $02 to $99
    mov $F3, <span class="hljs-comment">#$99</span>
</code></pre>
<h3 id="toc-18">Timers</h3>
<p>The SPC contains 3 timers that can be used for general purpose. Timers 0,1 count up at 8KHz, Timer 2 has a higher precision of 64KHz.</p>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$FA+X <span class="hljs-params">|  t  |</span>  t  <span class="hljs-params">|  t  |</span>  t  <span class="hljs-params">|  t  |</span>  t  <span class="hljs-params">|  t  |</span>  t  <span class="hljs-params">| Timer-X, Write only!
      +-----+-----+-----+-----+-----+-----+-----+-----+

t: Timing value.

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$FD+X |</span>  -  <span class="hljs-params">|  -  |</span>  -  <span class="hljs-params">|  -  |</span>  c  <span class="hljs-params">|  c  |</span>  c  <span class="hljs-params">|  c  |</span> Counter-X, Read only!
      +-----+-----+-----+-----+-----+-----+-----+-----+

<span class="hljs-symbol">c:</span> Count-up value.
</code></pre>
<p>The timers consist of an 8-bit internal counter and a 4-bit up-counter. When the timer is off, the internal counter can be programmed through registers Timer-X registers. When the timer is activated by a '1' bit in the Control register, then the timer starts counting up (at 8KHz/64Khz) until it reaches the amount specified in Timer-X. When this happens the internal counter is reset and Counter-X is incremented. When you read Counter-X, the value in it will be reset to zero. Take care not to let the up-counter overflow! It's only 4-bits wide, and if it overflows the value will be lost.</p>
<p>Psuedo Code - Setting Timer 0 to tick at 15ms:</p>
<ol>
<li>...Make sure the timer is off.</li>
<li>Write 120 (0x78) to <code>FA</code> (<code>15/(1000/8000) = 15*8 = 120</code>)</li>
<li>Write '1' to the control register bit (<code>F1</code>)</li>
<li>Timer is started..</li>
<li>Read <code>FD</code> periodically to check if ticks have passed.</li>
</ol>
<p>Real Code:</p>
<pre><code class="hljs armasm"><span class="hljs-comment">; An example to wait 15ms.</span>

    <span class="hljs-keyword">mov </span>timer0,  #<span class="hljs-number">$78</span>           <span class="hljs-comment">; 15ms timing value</span>
    <span class="hljs-keyword">mov </span>control, #<span class="hljs-number">$01</span>           <span class="hljs-comment">; this will destroy all other timers</span>

    <span class="hljs-comment">; timer is started</span>
<span class="hljs-symbol">
wait_for_tick:</span>
        <span class="hljs-keyword">mov </span>a, counter0         <span class="hljs-comment">; read counter</span>
        <span class="hljs-keyword">beq </span>    wait_for_tick   <span class="hljs-comment">; loop if 0</span>

    <span class="hljs-comment">; tick has passed, process data</span>
</code></pre>
<h3 id="toc-19">CPU Register Set</h3>
<p>The CPU has 6 registers in it: A, X, Y, SP, PC, PSW</p>
<p>All are 8-bit except for the PC (Program Counter), which points at a 16-bit program execution address.</p>
<p>The A (Accumulator) register is compatible with most CPU instructions.</p>
<p>The X/Y (Index) registers are mostly used for counters/memory addressing. For some instructions, the Y register can be paired with A ("YA") for 16-bit operations.</p>
<p>The SP (Stack Pointer) register points to an area of memory in Page1 (<code>0100</code> - <code>01FF</code>). Stack operations affect SP, the IPL ROM initializes SP to the top of Page1.</p>
<p>The PSW (Program Status Word) register contains various bits that effect operation of the CPU.</p>
<h3 id="toc-20">CPU Program Status Word</h3>
<h4>Flags stored in PSW Register</h4>
<table>
<thead>
<tr>
<th>Mnemonic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>N</code></td>
<td>Negative</td>
</tr>
<tr>
<td><code>V</code></td>
<td>Overflow</td>
</tr>
<tr>
<td><code>P</code></td>
<td>Direct page</td>
</tr>
<tr>
<td><code>B</code></td>
<td>Break</td>
</tr>
<tr>
<td><code>H</code></td>
<td>Half Carry</td>
</tr>
<tr>
<td><code>I</code></td>
<td>Interrupt enabled  (unused)</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>Zero</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Carry</td>
</tr>
</tbody>
</table>
<p>Negative Flag (N): The MSB of an operation's result is copied to the Negative flag.</p>
<p>Overflow Flag (V): I don't think I ever had to use this bit, It tells you if an overflow occured in the previous arithmetic operation.</p>
<p>Direct Page Flag (P): This bit controls the direct-page (dp) operations. The dp operations only have 1 address byte. If the P flag is cleared then the effective address will be 0000h+address. Otherwise it will be 0100h+address.</p>
<p>Half Carry Flag (H): The half-carry flag is used in arithmetic operations. It can be used to determine if the DAA/DAS instruction needs to be executed after a BCD addition/subtraction operation. It cannot be directly set by any instruction, however, it is cleared with CLRV.</p>
<p>Carry Flag (C): The carry flag is mainly used in arithmetic operations. It can be used to control program flow after addition/subtraction. Its also used by a few other functions, like shift commands. It can be directly set by instructions SETC and CLRC.</p>
<p>Break Flag (B): This flag is unused. The only instruction that touches it is BRK.</p>
<p>Interrupt Enable (I): Interrupts are not supported. This flag is unused.</p>
<h2 id="toc-4">Opcode Matrices (by jwdonal)</h2>
<h3 id="toc-21">SPC700 Opcode Matrix by Type (Native Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_1a.png" alt="SPC700 Opcode Matrix by Type (Native Mnemonics)"></p>
<h3 id="toc-22">SPC700 Opcode Matrix by Type (65816-Style Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_1b.png" alt="SPC700 Opcode Matrix by Type (65816-Style Mnemonics)"></p>
<h3 id="toc-23">SPC700 Opcode Matrix by Addressing Mode (Native Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_2a.png" alt="SPC700 Opcode Matrix by Addressing Mode (Native Mnemonics)"></p>
<h3 id="toc-24">SPC700 Opcode Matrix by Addressing Mode (65816-Style Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_2b.png" alt="SPC700 Opcode Matrix by Addressing Mode (65816-Style Mnemonics)"></p>
<h3 id="toc-25">SPC700 Opcode Matrix by Bits (Native Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_3a.png" alt="SPC700 Opcode Matrix by Bits (Native Mnemonics)"></p>
<h3 id="toc-26">SPC700 Opcode Matrix by Bits (65816-Style Mnemonics)</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_3b.png" alt="SPC700 Opcode Matrix by Bits (65816-Style Mnemonics)"></p>
<h3 id="toc-27">SPC700 Addressing Modes Effective Address Regions</h3>
<p><img src="./SPC700 Reference _ Super Famicom Development Wiki_files/spc700_opcode_matrix_4.png" alt="SPC700 Addressing Modes Effective Address Regions"></p>
<h2 id="toc-5">Instruction Chart</h2>
<table>
<thead>
<tr>
<th>Assembler Example</th>
<th>Operation</th>
<th>HEX</th>
<th>Flags Set</th>
<th>Bytes</th>
<th>Cycles</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ADC   (X), (Y)    </code></td>
<td><code>(X) = (X)+(Y)+C                                    </code></td>
<td>99</td>
<td>NV--H-ZC</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>ADC   A, #i       </code></td>
<td><code>A = A+i+C                                          </code></td>
<td>88</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>ADC   A, (X)      </code></td>
<td><code>A = A+(X)+C                                        </code></td>
<td>86</td>
<td>NV--H-ZC</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>ADC   A, [d]+Y    </code></td>
<td><code>A = A+([d]+Y)+C                                    </code></td>
<td>97</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>ADC   A, [d+X]    </code></td>
<td><code>A = A+([d+X])+C                                    </code></td>
<td>87</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>ADC   A, d        </code></td>
<td><code>A = A+(d)+C                                        </code></td>
<td>84</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>ADC   A, d+X      </code></td>
<td><code>A = A+(d+X)+C                                      </code></td>
<td>94</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>ADC   A, !a       </code></td>
<td><code>A = A+(a)+C                                        </code></td>
<td>85</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>ADC   A, !a+X     </code></td>
<td><code>A = A+(a+X)+C                                      </code></td>
<td>95</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>ADC   A, !a+Y     </code></td>
<td><code>A = A+(a+Y)+C                                      </code></td>
<td>96</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>ADC   dd, ds      </code></td>
<td><code>(dd) = (dd)+(d)+C                                  </code></td>
<td>89</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>ADC   d, #i       </code></td>
<td><code>(d) = (d)+i+C                                      </code></td>
<td>98</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>ADDW  YA, d       </code></td>
<td><code>YA  = YA + (d), H on high byte                     </code></td>
<td>7A</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>AND   (X), (Y)    </code></td>
<td><code>(X) = (X) &amp; (Y)                                    </code></td>
<td>39</td>
<td>N-----Z-</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>AND   A, #i       </code></td>
<td><code>A = A &amp; i                                          </code></td>
<td>28</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>AND   A, (X)      </code></td>
<td><code>A = A &amp; (X)                                        </code></td>
<td>26</td>
<td>N-----Z-</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>AND   A, [d]+Y    </code></td>
<td><code>A = A &amp; ([d]+Y)                                    </code></td>
<td>37</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>AND   A, [d+X]    </code></td>
<td><code>A = A &amp; ([d+X])                                    </code></td>
<td>27</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>AND   A, d        </code></td>
<td><code>A = A &amp; (d)                                        </code></td>
<td>24</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>AND   A, d+X      </code></td>
<td><code>A = A &amp; (d+X)                                      </code></td>
<td>34</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>AND   A, !a       </code></td>
<td><code>A = A &amp; (a)                                        </code></td>
<td>25</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>AND   A, !a+X     </code></td>
<td><code>A = A &amp; (a+X)                                      </code></td>
<td>35</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>AND   A, !a+Y     </code></td>
<td><code>A = A &amp; (a+Y)                                      </code></td>
<td>36</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>AND   dd, ds      </code></td>
<td><code>(dd) = (dd) &amp; (ds)                                 </code></td>
<td>29</td>
<td>N-----Z-</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>AND   d, #i       </code></td>
<td><code>(d) = (d) &amp; i                                      </code></td>
<td>38</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>AND1  C, /m.b     </code></td>
<td><code>C = C &amp; ~(m.b)                                     </code></td>
<td>6A</td>
<td>-------C</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>AND1  C, m.b      </code></td>
<td><code>C = C &amp; (m.b)                                      </code></td>
<td>4A</td>
<td>-------C</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>ASL   A           </code></td>
<td><code>Left shift A: high-&gt;C, 0-&gt;low                      </code></td>
<td>1C</td>
<td>N-----ZC</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>ASL   d           </code></td>
<td><code>Left shift (d) as above                            </code></td>
<td>0B</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>ASL   d+X         </code></td>
<td><code>Left shift (d+X) as above                          </code></td>
<td>1B</td>
<td>N-----ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>ASL   !a          </code></td>
<td><code>Left shift (a) as above                            </code></td>
<td>0C</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>BBC   d.0, r      </code></td>
<td><code>PC+=r  if d.0 == 0                                 </code></td>
<td>13</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.1, r      </code></td>
<td><code>PC+=r  if d.1 == 0                                 </code></td>
<td>33</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.2, r      </code></td>
<td><code>PC+=r  if d.2 == 0                                 </code></td>
<td>53</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.3, r      </code></td>
<td><code>PC+=r  if d.3 == 0                                 </code></td>
<td>73</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.4, r      </code></td>
<td><code>PC+=r  if d.4 == 0                                 </code></td>
<td>93</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.5, r      </code></td>
<td><code>PC+=r  if d.5 == 0                                 </code></td>
<td>B3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.6, r      </code></td>
<td><code>PC+=r  if d.6 == 0                                 </code></td>
<td>D3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBC   d.7, r      </code></td>
<td><code>PC+=r  if d.7 == 0                                 </code></td>
<td>F3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.0, r      </code></td>
<td><code>PC+=r  if d.0 == 1                                 </code></td>
<td>03</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.1, r      </code></td>
<td><code>PC+=r  if d.1 == 1                                 </code></td>
<td>23</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.2, r      </code></td>
<td><code>PC+=r  if d.2 == 1                                 </code></td>
<td>43</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.3, r      </code></td>
<td><code>PC+=r  if d.3 == 1                                 </code></td>
<td>63</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.4, r      </code></td>
<td><code>PC+=r  if d.4 == 1                                 </code></td>
<td>83</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.5, r      </code></td>
<td><code>PC+=r  if d.5 == 1                                 </code></td>
<td>A3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.6, r      </code></td>
<td><code>PC+=r  if d.6 == 1                                 </code></td>
<td>C3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BBS   d.7, r      </code></td>
<td><code>PC+=r  if d.7 == 1                                 </code></td>
<td>E3</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>BCC   r           </code></td>
<td><code>PC+=r  if C == 0                                   </code></td>
<td>90</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BCS   r           </code></td>
<td><code>PC+=r  if C == 1                                   </code></td>
<td>B0</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BEQ   r           </code></td>
<td><code>PC+=r  if Z == 1                                   </code></td>
<td>F0</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BMI   r           </code></td>
<td><code>PC+=r  if N == 1                                   </code></td>
<td>30</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BNE   r           </code></td>
<td><code>PC+=r  if Z == 0                                   </code></td>
<td>D0</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BPL   r           </code></td>
<td><code>PC+=r  if N == 0                                   </code></td>
<td>10</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BVC   r           </code></td>
<td><code>PC+=r  if V == 0                                   </code></td>
<td>50</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BVS   r           </code></td>
<td><code>PC+=r  if V == 1                                   </code></td>
<td>70</td>
<td>--------</td>
<td>2</td>
<td>2/4</td>
</tr>
<tr>
<td><code>BRA   r           </code></td>
<td><code>PC+=r                                              </code></td>
<td>2F</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>BRK               </code></td>
<td><code>Push PC and Flags, PC = [$FFDE]                    </code></td>
<td>0F</td>
<td>---1-0--</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>CALL  !a          </code></td>
<td><code>(SP--)=PCh, (SP--)=PCl, PC=a                       </code></td>
<td>3F</td>
<td>--------</td>
<td>3</td>
<td>8</td>
</tr>
<tr>
<td><code>CBNE  d+X, r      </code></td>
<td><code>CMP A, (d+X) then BNE                              </code></td>
<td>DE</td>
<td>--------</td>
<td>3</td>
<td>6/8</td>
</tr>
<tr>
<td><code>CBNE  d, r        </code></td>
<td><code>CMP A, (d) then BNE                                </code></td>
<td>2E</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>CLR1  d.0         </code></td>
<td><code>d.0 = 0                                            </code></td>
<td>12</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.1         </code></td>
<td><code>d.1 = 0                                            </code></td>
<td>32</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.2         </code></td>
<td><code>d.2 = 0                                            </code></td>
<td>52</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.3         </code></td>
<td><code>d.3 = 0                                            </code></td>
<td>72</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.4         </code></td>
<td><code>d.4 = 0                                            </code></td>
<td>92</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.5         </code></td>
<td><code>d.5 = 0                                            </code></td>
<td>B2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.6         </code></td>
<td><code>d.6 = 0                                            </code></td>
<td>D2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLR1  d.7         </code></td>
<td><code>d.7 = 0                                            </code></td>
<td>F2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CLRC              </code></td>
<td><code>C = 0                                              </code></td>
<td>60</td>
<td>-------0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>CLRP              </code></td>
<td><code>P = 0                                              </code></td>
<td>20</td>
<td>--0-----</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>CLRV              </code></td>
<td><code>V = 0, H = 0                                       </code></td>
<td>E0</td>
<td>-0--0---</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>CMP   (X), (Y)    </code></td>
<td><code>(X) - (Y)                                          </code></td>
<td>79</td>
<td>N-----ZC</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>CMP   A, #i       </code></td>
<td><code>A - i                                              </code></td>
<td>68</td>
<td>N-----ZC</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>CMP   A, (X)      </code></td>
<td><code>A - (X)                                            </code></td>
<td>66</td>
<td>N-----ZC</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>CMP   A, [d]+Y    </code></td>
<td><code>A - ([d]+Y)                                        </code></td>
<td>77</td>
<td>N-----ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>CMP   A, [d+X]    </code></td>
<td><code>A - ([d+X])                                        </code></td>
<td>67</td>
<td>N-----ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>CMP   A, d        </code></td>
<td><code>A - (d)                                            </code></td>
<td>64</td>
<td>N-----ZC</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>CMP   A, d+X      </code></td>
<td><code>A - (d+X)                                          </code></td>
<td>74</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>CMP   A, !a       </code></td>
<td><code>A - (a)                                            </code></td>
<td>65</td>
<td>N-----ZC</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>CMP   A, !a+X     </code></td>
<td><code>A - (a+X)                                          </code></td>
<td>75</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>CMP   A, !a+Y     </code></td>
<td><code>A - (a+Y)                                          </code></td>
<td>76</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>CMP   X, #i       </code></td>
<td><code>X - i                                              </code></td>
<td>C8</td>
<td>N-----ZC</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>CMP   X, d        </code></td>
<td><code>X - (d)                                            </code></td>
<td>3E</td>
<td>N-----ZC</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>CMP   X, !a       </code></td>
<td><code>X - (a)                                            </code></td>
<td>1E</td>
<td>N-----ZC</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>CMP   Y, #i       </code></td>
<td><code>Y - i                                              </code></td>
<td>AD</td>
<td>N-----ZC</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>CMP   Y, d        </code></td>
<td><code>Y - (d)                                            </code></td>
<td>7E</td>
<td>N-----ZC</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>CMP   Y, !a       </code></td>
<td><code>Y - (a)                                            </code></td>
<td>5E</td>
<td>N-----ZC</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>CMP   dd, ds      </code></td>
<td><code>(dd) - (ds)                                        </code></td>
<td>69</td>
<td>N-----ZC</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>CMP   d, #i       </code></td>
<td><code>(d) - i                                            </code></td>
<td>78</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>CMPW  YA, d       </code></td>
<td><code>YA - (d)                                           </code></td>
<td>5A</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>DAA   A           </code></td>
<td><code>decimal adjust for addition                        </code></td>
<td>DF</td>
<td>N-----ZC</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>DAS   A           </code></td>
<td><code>decimal adjust for subtraction                     </code></td>
<td>BE</td>
<td>N-----ZC</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>DBNZ  Y, r        </code></td>
<td><code>Y-- then JNZ                                       </code></td>
<td>FE</td>
<td>--------</td>
<td>2</td>
<td>4/6</td>
</tr>
<tr>
<td><code>DBNZ  d, r        </code></td>
<td><code>(d)-- then JNZ                                     </code></td>
<td>6E</td>
<td>--------</td>
<td>3</td>
<td>5/7</td>
</tr>
<tr>
<td><code>DEC   A           </code></td>
<td><code>A--                                                </code></td>
<td>9C</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>DEC   X           </code></td>
<td><code>X--                                                </code></td>
<td>1D</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>DEC   Y           </code></td>
<td><code>Y--                                                </code></td>
<td>DC</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>DEC   d           </code></td>
<td><code>(d)--                                              </code></td>
<td>8B</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>DEC   d+X         </code></td>
<td><code>(d+X)--                                            </code></td>
<td>9B</td>
<td>N-----Z-</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>DEC   !a          </code></td>
<td><code>(a)--                                              </code></td>
<td>8C</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>DECW  d           </code></td>
<td><code>Word (d)--                                         </code></td>
<td>1A</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>DI                </code></td>
<td><code>I = 0                                              </code></td>
<td>C0</td>
<td>-----0--</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>DIV   YA, X       </code></td>
<td><code>A=YA/X, Y=mod(YA,X)                                </code></td>
<td>9E</td>
<td>NV--H-Z-</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td><code>EI                </code></td>
<td><code>I = 1                                              </code></td>
<td>A0</td>
<td>-----1--</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>EOR   (X), (Y)    </code></td>
<td><code>(X) = (X) EOR (Y)                                  </code></td>
<td>59</td>
<td>N-----Z-</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>EOR   A, #i       </code></td>
<td><code>A = A EOR i                                        </code></td>
<td>48</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>EOR   A, (X)      </code></td>
<td><code>A = A EOR (X)                                      </code></td>
<td>46</td>
<td>N-----Z-</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>EOR   A, [d]+Y    </code></td>
<td><code>A = A EOR ([d]+Y)                                  </code></td>
<td>57</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>EOR   A, [d+X]    </code></td>
<td><code>A = A EOR ([d+X])                                  </code></td>
<td>47</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>EOR   A, d        </code></td>
<td><code>A = A EOR (d)                                      </code></td>
<td>44</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>EOR   A, d+X      </code></td>
<td><code>A = A EOR (d+X)                                    </code></td>
<td>54</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>EOR   A, !a       </code></td>
<td><code>A = A EOR (a)                                      </code></td>
<td>45</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>EOR   A, !a+X     </code></td>
<td><code>A = A EOR (a+X)                                    </code></td>
<td>55</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>EOR   A, !a+Y     </code></td>
<td><code>A = A EOR (a+Y)                                    </code></td>
<td>56</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>EOR   dd, ds      </code></td>
<td><code>(dd) = (dd) EOR (ds)                               </code></td>
<td>49</td>
<td>N-----Z-</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>EOR   d, #i       </code></td>
<td><code>(d) = (d) EOR i                                    </code></td>
<td>58</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>EOR1  C, m.b      </code></td>
<td><code>C = C EOR (m.b)                                    </code></td>
<td>8A</td>
<td>-------C</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>INC   A           </code></td>
<td><code>A++                                                </code></td>
<td>BC</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>INC   X           </code></td>
<td><code>X++                                                </code></td>
<td>3D</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>INC   Y           </code></td>
<td><code>Y++                                                </code></td>
<td>FC</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>INC   d           </code></td>
<td><code>(d)++                                              </code></td>
<td>AB</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>INC   d+X         </code></td>
<td><code>(d+X)++                                            </code></td>
<td>BB</td>
<td>N-----Z-</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>INC   !a          </code></td>
<td><code>(a)++                                              </code></td>
<td>AC</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>INCW  d           </code></td>
<td><code>Word (d)++                                         </code></td>
<td>3A</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>JMP   [!a+X]      </code></td>
<td><code>PC = [a+X]                                         </code></td>
<td>1F</td>
<td>--------</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>JMP   !a          </code></td>
<td><code>PC = a                                             </code></td>
<td>5F</td>
<td>--------</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td><code>LSR   A           </code></td>
<td><code>Right shift A: 0-&gt;high, low-&gt;C                     </code></td>
<td>5C</td>
<td>N-----ZC</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>LSR   d           </code></td>
<td><code>Right shift (d) as above                           </code></td>
<td>4B</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>LSR   d+X         </code></td>
<td><code>Right shift (d+X) as above                         </code></td>
<td>5B</td>
<td>N-----ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>LSR   !a          </code></td>
<td><code>Right shift (a) as above                           </code></td>
<td>4C</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   (X)+, A     </code></td>
<td><code>(X++) = A      (no read)                           </code></td>
<td>AF</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   (X), A      </code></td>
<td><code>(X) = A        (read)                              </code></td>
<td>C6</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   [d]+Y, A    </code></td>
<td><code>([d]+Y) = A    (read)                              </code></td>
<td>D7</td>
<td>--------</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td><code>MOV   [d+X], A    </code></td>
<td><code>([d+X]) = A    (read)                              </code></td>
<td>C7</td>
<td>--------</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td><code>MOV   A, #i       </code></td>
<td><code>A = i                                              </code></td>
<td>E8</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   A, (X)      </code></td>
<td><code>A = (X)                                            </code></td>
<td>E6</td>
<td>N-----Z-</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>MOV   A, (X)+     </code></td>
<td><code>A = (X++)                                          </code></td>
<td>BF</td>
<td>N-----Z-</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   A, [d]+Y    </code></td>
<td><code>A = ([d]+Y)                                        </code></td>
<td>F7</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>MOV   A, [d+X]    </code></td>
<td><code>A = ([d+X])                                        </code></td>
<td>E7</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>MOV   A, X        </code></td>
<td><code>A = X                                              </code></td>
<td>7D</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   A, Y        </code></td>
<td><code>A = Y                                              </code></td>
<td>DD</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   A, d        </code></td>
<td><code>A = (d)                                            </code></td>
<td>E4</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>MOV   A, d+X      </code></td>
<td><code>A = (d+X)                                          </code></td>
<td>F4</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   A, !a       </code></td>
<td><code>A = (a)                                            </code></td>
<td>E5</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   A, !a+X     </code></td>
<td><code>A = (a+X)                                          </code></td>
<td>F5</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   A, !a+Y     </code></td>
<td><code>A = (a+Y)                                          </code></td>
<td>F6</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   SP, X       </code></td>
<td><code>SP = X                                             </code></td>
<td>BD</td>
<td>--------</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   X, #i       </code></td>
<td><code>X = i                                              </code></td>
<td>CD</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   X, A        </code></td>
<td><code>X = A                                              </code></td>
<td>5D</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   X, SP       </code></td>
<td><code>X = SP                                             </code></td>
<td>9D</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   X, d        </code></td>
<td><code>X = (d)                                            </code></td>
<td>F8</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>MOV   X, d+Y      </code></td>
<td><code>X = (d+Y)                                          </code></td>
<td>F9</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   X, !a       </code></td>
<td><code>X = (a)                                            </code></td>
<td>E9</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   Y, #i       </code></td>
<td><code>Y = i                                              </code></td>
<td>8D</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   Y, A        </code></td>
<td><code>Y = A                                              </code></td>
<td>FD</td>
<td>N-----Z-</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>MOV   Y, d        </code></td>
<td><code>Y = (d)                                            </code></td>
<td>EB</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>MOV   Y, d+X      </code></td>
<td><code>Y = (d+X)                                          </code></td>
<td>FB</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   Y, !a       </code></td>
<td><code>Y = (a)                                            </code></td>
<td>EC</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   dd, ds      </code></td>
<td><code>(dd) = (ds)    (no read)                           </code></td>
<td>FA</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   d+X, A      </code></td>
<td><code>(d+X) = A      (read)                              </code></td>
<td>D4</td>
<td>--------</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   d+X, Y      </code></td>
<td><code>(d+X) = Y      (read)                              </code></td>
<td>DB</td>
<td>--------</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   d+Y, X      </code></td>
<td><code>(d+Y) = X      (read)                              </code></td>
<td>D9</td>
<td>--------</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   d, #i       </code></td>
<td><code>(d) = i        (read)                              </code></td>
<td>8F</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   d, A        </code></td>
<td><code>(d) = A        (read)                              </code></td>
<td>C4</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   d, X        </code></td>
<td><code>(d) = X        (read)                              </code></td>
<td>D8</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   d, Y        </code></td>
<td><code>(d) = Y        (read)                              </code></td>
<td>CB</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV   !a+X, A     </code></td>
<td><code>(a+X) = A      (read)                              </code></td>
<td>D5</td>
<td>--------</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>MOV   !a+Y, A     </code></td>
<td><code>(a+Y) = A      (read)                              </code></td>
<td>D6</td>
<td>--------</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>MOV   !a, A       </code></td>
<td><code>(a) = A        (read)                              </code></td>
<td>C5</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   !a, X       </code></td>
<td><code>(a) = X        (read)                              </code></td>
<td>C9</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV   !a, Y       </code></td>
<td><code>(a) = Y        (read)                              </code></td>
<td>CC</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>MOV1  C, m.b      </code></td>
<td><code>C = (m.b)                                          </code></td>
<td>AA</td>
<td>-------C</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>MOV1  m.b, C      </code></td>
<td><code>(m.b) = C                                          </code></td>
<td>CA</td>
<td>--------</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>MOVW  YA, d       </code></td>
<td><code>YA = word (d)                                      </code></td>
<td>BA</td>
<td>N-----Z-</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>MOVW  d, YA       </code></td>
<td><code>word (d) = YA  (read low only)                     </code></td>
<td>DA</td>
<td>--------</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>MUL   YA          </code></td>
<td><code>YA = Y * A, NZ on Y only                           </code></td>
<td>CF</td>
<td>N-----Z-</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td><code>NOP               </code></td>
<td><code>do nothing                                         </code></td>
<td>00</td>
<td>--------</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>NOT1  m.b         </code></td>
<td><code>m.b = ~m.b                                         </code></td>
<td>EA</td>
<td>--------</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>NOTC              </code></td>
<td><code>C = !C                                             </code></td>
<td>ED</td>
<td>-------C</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>OR    (X), (Y)    </code></td>
<td>(X) = (X) | (Y)</td>
<td>19</td>
<td>N-----Z-</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>OR    A, #i       </code></td>
<td>A = A | i</td>
<td>08</td>
<td>N-----Z-</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>OR    A, (X)      </code></td>
<td>A = A | (X)</td>
<td>06</td>
<td>N-----Z-</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>OR    A, [d]+Y    </code></td>
<td>A = A | <code>([d]+Y)</code></td>
<td>17</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>OR    A, [d+X]    </code></td>
<td>A = A | <code>([d+X])</code></td>
<td>07</td>
<td>N-----Z-</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>OR    A, d        </code></td>
<td>A = A | (d)</td>
<td>04</td>
<td>N-----Z-</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>OR    A, d+X      </code></td>
<td>A = A | (d+X)</td>
<td>14</td>
<td>N-----Z-</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>OR    A, !a       </code></td>
<td>A = A | (a)</td>
<td>05</td>
<td>N-----Z-</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>OR    A, !a+X     </code></td>
<td>A = A | (a+X)</td>
<td>15</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>OR    A, !a+Y     </code></td>
<td>A = A | (a+Y)</td>
<td>16</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>OR    dd, ds      </code></td>
<td>(dd) = (dd) | (ds)</td>
<td>09</td>
<td>N-----Z-</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>OR    d, #i       </code></td>
<td>(d) = (d) | i</td>
<td>18</td>
<td>N-----Z-</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>OR1   C, /m.b     </code></td>
<td>C = C | ~(m.b)</td>
<td>2A</td>
<td>-------C</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>OR1   C, m.b      </code></td>
<td>C = C | (m.b)</td>
<td>0A</td>
<td>-------C</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>PCALL u           </code></td>
<td><code>CALL $FF00+u                                       </code></td>
<td>4F</td>
<td>--------</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>POP   A           </code></td>
<td><code>A = (++SP)                                         </code></td>
<td>AE</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>POP   PSW         </code></td>
<td><code>Flags = (++SP)                                     </code></td>
<td>8E</td>
<td>NVPBHIZC</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>POP   X           </code></td>
<td><code>X = (++SP)                                         </code></td>
<td>CE</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>POP   Y           </code></td>
<td><code>Y = (++SP)                                         </code></td>
<td>EE</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>PUSH  A           </code></td>
<td><code>(SP--) = A                                         </code></td>
<td>2D</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>PUSH  PSW         </code></td>
<td><code>(SP--) = Flags                                     </code></td>
<td>0D</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>PUSH  X           </code></td>
<td><code>(SP--) = X                                         </code></td>
<td>4D</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>PUSH  Y           </code></td>
<td><code>(SP--) = Y                                         </code></td>
<td>6D</td>
<td>--------</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td><code>RET               </code></td>
<td><code>Pop PC                                             </code></td>
<td>6F</td>
<td>--------</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>RETI              </code></td>
<td><code>Pop Flags, PC                                      </code></td>
<td>7F</td>
<td>NVPBHIZC</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td><code>ROL   A           </code></td>
<td><code>Left shift A: low=C, C=high                        </code></td>
<td>3C</td>
<td>N-----ZC</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>ROL   d           </code></td>
<td><code>Left shift (d) as above                            </code></td>
<td>2B</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>ROL   d+X         </code></td>
<td><code>Left shift (d+X) as above                          </code></td>
<td>3B</td>
<td>N-----ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>ROL   !a          </code></td>
<td><code>Left shift (a) as above                            </code></td>
<td>2C</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>ROR   A           </code></td>
<td><code>Right shift A: high=C, C=low                       </code></td>
<td>7C</td>
<td>N-----ZC</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>ROR   d           </code></td>
<td><code>Right shift (d) as above                           </code></td>
<td>6B</td>
<td>N-----ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>ROR   d+X         </code></td>
<td><code>Right shift (d+X) as above                         </code></td>
<td>7B</td>
<td>N-----ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>ROR   !a          </code></td>
<td><code>Right shift (a) as above                           </code></td>
<td>6C</td>
<td>N-----ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>SBC   (X), (Y)    </code></td>
<td><code>(X) = (X)-(Y)-!C                                   </code></td>
<td>B9</td>
<td>NV--H-ZC</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td><code>SBC   A, #i       </code></td>
<td><code>A = A-i-!C                                         </code></td>
<td>A8</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>SBC   A, (X)      </code></td>
<td><code>A = A-(X)-!C                                       </code></td>
<td>A6</td>
<td>NV--H-ZC</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td><code>SBC   A, [d]+Y    </code></td>
<td><code>A = A-([d]+Y)-!C                                   </code></td>
<td>B7</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>SBC   A, [d+X]    </code></td>
<td><code>A = A-([d+X])-!C                                   </code></td>
<td>A7</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td><code>SBC   A, d        </code></td>
<td><code>A = A-(d)-!C                                       </code></td>
<td>A4</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td><code>SBC   A, d+X      </code></td>
<td><code>A = A-(d+X)-!C                                     </code></td>
<td>B4</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SBC   A, !a       </code></td>
<td><code>A = A-(a)-!C                                       </code></td>
<td>A5</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><code>SBC   A, !a+X     </code></td>
<td><code>A = A-(a+X)-!C                                     </code></td>
<td>B5</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>SBC   A, !a+Y     </code></td>
<td><code>A = A-(a+Y)-!C                                     </code></td>
<td>B6</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>SBC   dd, ds      </code></td>
<td><code>(dd) = (dd)-(ds)-!C                                </code></td>
<td>A9</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>SBC   d, #i       </code></td>
<td><code>(d) = (d)-i-!C                                     </code></td>
<td>B8</td>
<td>NV--H-ZC</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td><code>SET1  d.0         </code></td>
<td><code>d.0 = 1                                            </code></td>
<td>02</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.1         </code></td>
<td><code>d.1 = 1                                            </code></td>
<td>22</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.2         </code></td>
<td><code>d.2 = 1                                            </code></td>
<td>42</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.3         </code></td>
<td><code>d.3 = 1                                            </code></td>
<td>62</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.4         </code></td>
<td><code>d.4 = 1                                            </code></td>
<td>82</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.5         </code></td>
<td><code>d.5 = 1                                            </code></td>
<td>A2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.6         </code></td>
<td><code>d.6 = 1                                            </code></td>
<td>C2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SET1  d.7         </code></td>
<td><code>d.7 = 1                                            </code></td>
<td>E2</td>
<td>--------</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td><code>SETC              </code></td>
<td><code>C = 1                                              </code></td>
<td>80</td>
<td>-------1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>SETP              </code></td>
<td><code>P = 1                                              </code></td>
<td>40</td>
<td>--1-----</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><code>SLEEP             </code></td>
<td><code>Halts the processor                                </code></td>
<td>EF</td>
<td>--------</td>
<td>1</td>
<td>?</td>
</tr>
<tr>
<td><code>STOP              </code></td>
<td><code>Halts the processor                                </code></td>
<td>FF</td>
<td>--------</td>
<td>1</td>
<td>?</td>
</tr>
<tr>
<td><code>SUBW  YA, d       </code></td>
<td><code>YA  = YA - (d), H on high byte                     </code></td>
<td>9A</td>
<td>NV--H-ZC</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td><code>TCALL 0           </code></td>
<td><code>CALL [$FFDE]                                       </code></td>
<td>01</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 1           </code></td>
<td><code>CALL [$FFDC]                                       </code></td>
<td>11</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 2           </code></td>
<td><code>CALL [$FFDA]                                       </code></td>
<td>21</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 3           </code></td>
<td><code>CALL [$FFD8]                                       </code></td>
<td>31</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 4           </code></td>
<td><code>CALL [$FFD6]                                       </code></td>
<td>41</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 5           </code></td>
<td><code>CALL [$FFD4]                                       </code></td>
<td>51</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 6           </code></td>
<td><code>CALL [$FFD2]                                       </code></td>
<td>61</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 7           </code></td>
<td><code>CALL [$FFD0]                                       </code></td>
<td>71</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 8           </code></td>
<td><code>CALL [$FFCE]                                       </code></td>
<td>81</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 9           </code></td>
<td><code>CALL [$FFCC]                                       </code></td>
<td>91</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 10          </code></td>
<td><code>CALL [$FFCA]                                       </code></td>
<td>A1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 11          </code></td>
<td><code>CALL [$FFC8]                                       </code></td>
<td>B1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 12          </code></td>
<td><code>CALL [$FFC6]                                       </code></td>
<td>C1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 13          </code></td>
<td><code>CALL [$FFC4]                                       </code></td>
<td>D1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 14          </code></td>
<td><code>CALL [$FFC2]                                       </code></td>
<td>E1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCALL 15          </code></td>
<td><code>CALL [$FFC0]                                       </code></td>
<td>F1</td>
<td>--------</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td><code>TCLR1 !a          </code></td>
<td><code>(a) = (a)&amp;~A, ZN as for A-(a)                      </code></td>
<td>4E</td>
<td>N-----Z-</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>TSET1 !a          </code></td>
<td>(a) = (a)|A, ZN as for A-(a)</td>
<td>0E</td>
<td>N-----Z-</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td><code>XCN   A           </code></td>
<td>A = (A&gt;&gt;4) | (A&lt;&lt;4)</td>
<td>9F</td>
<td>N-----Z-</td>
<td>1</td>
<td>5</td>
</tr>
</tbody>
</table>
<h2 id="toc-6">CPU Instruction Set</h2>
<pre><code class="hljs ruby"><span class="hljs-symbol">Registers:</span>
A   A register
X   X register
Y   Y register
PSW PSW register
YA  YA paired <span class="hljs-number">16</span>-bit register
PC  Program Counter
SP  Stack Pointer

Data <span class="hljs-symbol">types:</span>
imm <span class="hljs-number">8</span>-bit immediate data
dp  <span class="hljs-number">8</span>-bit direct page offset (direct page is either <span class="hljs-number">0000</span>h <span class="hljs-keyword">or</span> <span class="hljs-number">0100</span>h depending on P flag)
abs <span class="hljs-number">16</span>-bit absolute address
rel <span class="hljs-number">8</span>-bit offset relative to PC
mem bit operation address, (<span class="hljs-number">13</span>-bits)
bit bit location (<span class="hljs-number">3</span>-bits)

<span class="hljs-symbol">Memory:</span>
(addr)       <span class="hljs-number">8</span>-bit memory value at addr
<span class="hljs-symbol">word:</span>(addr)  <span class="hljs-number">16</span>-bit memory value at addr
<span class="hljs-symbol">abs:</span>(addr)   <span class="hljs-number">16</span>-bit memory value at addr
I hope you get the point. <span class="hljs-symbol">:</span>\

For opcode affected <span class="hljs-symbol">instructions:</span>
    MSB
x   [ x <span class="hljs-params">| x |</span> x <span class="hljs-params">| 0 |</span>     opcode    ]

y   [ y <span class="hljs-params">| y |</span> y <span class="hljs-params">| 1 |</span>     opcode    ]

Flag <span class="hljs-symbol">settings:</span>
Uppercase <span class="hljs-symbol">flag:</span> Flag is set according to result of operation
Lowercase <span class="hljs-string">'c'</span> : Flag is complemented
       -      : Flag is <span class="hljs-keyword">not</span> affected
       <span class="hljs-number">0</span>      : Flag is reset
       <span class="hljs-number">1</span>      : Flag is set

<span class="hljs-symbol">Operations:</span>

&lt;-  Transfer data (<span class="hljs-keyword">in</span> direction)
-&gt;  Transfer data
+=  Add values <span class="hljs-keyword">and</span> affect operand
+   Add values <span class="hljs-keyword">and</span> <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> affect operand
    Same <span class="hljs-keyword">for</span> all arithmetic/logical operations
-   Subtraction
<span class="hljs-params">|   Logical OR
^   Exclusive Logical OR
&amp;   Logical AND
&gt;&gt;  Shift right 1 bit
&lt;&lt;  Shift left 1 bit
++  Increment Data
--  Decrement Data
*   Multiplication
/   Division
%   Modulus (remainder)
</span></code></pre>
<h3 id="toc-28">8-bit Data Transmission (Read)</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MOV</code></td>
<td><code>A, #imm  </code></td>
<td><code>E8</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- imm</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, (X)   </code></td>
<td><code>E6</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, (X)+  </code></td>
<td><code>BF</code></td>
<td>1</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (X), X is incremented afterward</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, dp    </code></td>
<td><code>E4</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, dp+X  </code></td>
<td><code>F4</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (dp+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, !abs  </code></td>
<td><code>E5</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (abs)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, !abs+X</code></td>
<td><code>F5</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (abs+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>F6</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (abs+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>E7</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (abs:(abs+X))</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>F7</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- (abs:(abs)+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, #imm  </code></td>
<td><code>CD</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>X &lt;- imm</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, dp    </code></td>
<td><code>F8</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>X &lt;- (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, dp+Y  </code></td>
<td><code>F9</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>X &lt;- (dp+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, !abs  </code></td>
<td><code>E9</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>X &lt;- (abs)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>Y, #imm  </code></td>
<td><code>8D</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>Y &lt;- imm</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>Y, dp    </code></td>
<td><code>EB</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>Y &lt;- (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>Y, dp+X  </code></td>
<td><code>FB</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>Y &lt;- (dp+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>Y, !abs  </code></td>
<td><code>EC</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>Y &lt;- (abs)</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-29">8-bit Data Transmission (Write)</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MOV</code></td>
<td><code>(X), A   </code></td>
<td><code>C6</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>A -&gt; (X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>(X)+, A  </code></td>
<td><code>AF</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>A -&gt; (X), X is incremented</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp, A    </code></td>
<td><code>C4</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>A -&gt; (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp+X, A  </code></td>
<td><code>D4</code></td>
<td>2</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>A -&gt; (dp+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>!abs, A  </code></td>
<td><code>C5</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>A -&gt; (abs)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>!abs+X, A</code></td>
<td><code>D5</code></td>
<td>3</td>
<td>6</td>
<td><code>--------</code></td>
<td><code>A -&gt; (abs+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>!abs+Y, A</code></td>
<td><code>D6</code></td>
<td>3</td>
<td>6</td>
<td><code>--------</code></td>
<td><code>A -&gt; (abs+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>[dp+X], A</code></td>
<td><code>C7</code></td>
<td>2</td>
<td>7</td>
<td><code>--------</code></td>
<td><code>A -&gt; (abs:(dp+X))</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>[dp]+Y, A</code></td>
<td><code>D7</code></td>
<td>2</td>
<td>7</td>
<td><code>--------</code></td>
<td><code>A -&gt; (abs:(dp)+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp, X    </code></td>
<td><code>D8</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>X -&gt; (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp+Y, X  </code></td>
<td><code>D9</code></td>
<td>2</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>X -&gt; (dp+Y)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>!abs, X  </code></td>
<td><code>C9</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>X -&gt; (abs)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp, Y    </code></td>
<td><code>CB</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>Y -&gt; (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp+X, Y  </code></td>
<td><code>DB</code></td>
<td>2</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>Y -&gt; (dp+X)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>!abs, Y  </code></td>
<td><code>CC</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>Y -&gt; (abs)</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-30">8-bit Data Transmission (Reg-&gt;Reg, Mem-&gt;Mem)</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MOV</code></td>
<td><code>A, X    </code></td>
<td><code>7D</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- X</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>A, Y    </code></td>
<td><code>DD</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A &lt;- Y</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, A    </code></td>
<td><code>5D</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A -&gt; X</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>Y, A    </code></td>
<td><code>FD</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A -&gt; Y</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>X, SP   </code></td>
<td><code>9D</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>X &lt;- SP</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>SP, X   </code></td>
<td><code>BD</code></td>
<td>1</td>
<td>2</td>
<td><code>--------</code></td>
<td><code>X -&gt; SP</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp, dp  </code></td>
<td><code>FA</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>(dp) &lt;- (dp)</code></td>
</tr>
<tr>
<td><code>MOV</code></td>
<td><code>dp, #imm</code></td>
<td><code>8F</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>(dp) &lt;- imm</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-31">8-bit Arithmetic</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ADC</code></td>
<td><code>A, #imm  </code></td>
<td><code>88</code></td>
<td>2</td>
<td>2</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += imm          + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, (X)   </code></td>
<td><code>86</code></td>
<td>1</td>
<td>3</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (X)          + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, dp    </code></td>
<td><code>84</code></td>
<td>2</td>
<td>3</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (dp)         + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, dp+X  </code></td>
<td><code>94</code></td>
<td>2</td>
<td>4</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (dp+X)       + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, !abs  </code></td>
<td><code>85</code></td>
<td>3</td>
<td>4</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (abs)        + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, !abs+X</code></td>
<td><code>95</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (abs+X)      + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>96</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (abs+Y)      + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>87</code></td>
<td>2</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (abs:(dp+X)) + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>97</code></td>
<td>2</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>A += (abs:(dp)+Y) + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>(X),(Y)  </code></td>
<td><code>99</code></td>
<td>1</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>(X) += (Y)        + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>dp, dp   </code></td>
<td><code>89</code></td>
<td>3</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>(dp) += (dp)      + C</code></td>
</tr>
<tr>
<td><code>ADC</code></td>
<td><code>dp, #imm </code></td>
<td><code>98</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>(dp) += imm       + C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, #imm  </code></td>
<td><code>A8</code></td>
<td>2</td>
<td>2</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= imm          + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, (X)   </code></td>
<td><code>A6</code></td>
<td>1</td>
<td>3</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (X)          + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, dp    </code></td>
<td><code>A4</code></td>
<td>2</td>
<td>3</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (dp)         + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, dp+X  </code></td>
<td><code>B4</code></td>
<td>2</td>
<td>4</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (dp+X)       + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, !abs  </code></td>
<td><code>A5</code></td>
<td>3</td>
<td>4</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (abs)        + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, !abs+X</code></td>
<td><code>B5</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (abs+X)      + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>B6</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (abs+Y)      + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>A7</code></td>
<td>2</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (abs:(dp+X)) + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>B7</code></td>
<td>2</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>A -= (abs:(dp)+Y) + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>(X), (Y) </code></td>
<td><code>B9</code></td>
<td>1</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>(X) -= (Y)        + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>dp, dp   </code></td>
<td><code>A9</code></td>
<td>3</td>
<td>6</td>
<td><code>NV--H-ZC</code></td>
<td><code>(dp) -= (dp)      + !C</code></td>
</tr>
<tr>
<td><code>SBC</code></td>
<td><code>dp, #imm </code></td>
<td><code>B8</code></td>
<td>3</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>(dp) -= imm       + !C</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, #imm  </code></td>
<td><code>68</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>A - imm</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, (X)   </code></td>
<td><code>66</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td><code>A - (X)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, dp    </code></td>
<td><code>64</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td><code>A - (dp)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, dp+X  </code></td>
<td><code>74</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>A - (dp+X)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, !abs  </code></td>
<td><code>65</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>A - (abs)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, !abs+X</code></td>
<td><code>75</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>A - (abs+X)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>76</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>A - (abs+Y)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>67</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----ZC</code></td>
<td><code>A - (abs:(dp+X))</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>77</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----ZC</code></td>
<td><code>A - (abs:(dp)+Y)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>(X), (Y) </code></td>
<td><code>79</code></td>
<td>1</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>(X) - (Y)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>dp, dp   </code></td>
<td><code>69</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----ZC</code></td>
<td><code>(dp) - (dp)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>dp, #imm </code></td>
<td><code>78</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>(dp) - imm</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>X, #imm  </code></td>
<td><code>C8</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>X - imm</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>X, dp    </code></td>
<td><code>3E</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td><code>X - (dp)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>X, !abs  </code></td>
<td><code>1E</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>X - (abs)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>Y, #imm  </code></td>
<td><code>AD</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>Y - imm</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>Y, dp    </code></td>
<td><code>7E</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td><code>Y - (dp)</code></td>
</tr>
<tr>
<td><code>CMP</code></td>
<td><code>Y, !abs  </code></td>
<td><code>5E</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>Y - (abs)</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-32">8-bit Logical Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AND</code></td>
<td><code>A, #imm  </code></td>
<td><code>28</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= imm</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, (X)   </code></td>
<td><code>26</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (X)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, dp    </code></td>
<td><code>24</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (dp)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, dp+X  </code></td>
<td><code>34</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (dp+X)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, !abs  </code></td>
<td><code>25</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (abs)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, !abs+X</code></td>
<td><code>35</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (abs+X)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>36</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (abs+Y)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>27</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (abs:(dp+X))</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>37</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A &amp;= (abs:(dp)+Y)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>(X), (Y) </code></td>
<td><code>39</code></td>
<td>1</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>(X) &amp;= (Y)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>dp, dp   </code></td>
<td><code>29</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>(dp) &amp;= (dp)</code></td>
</tr>
<tr>
<td><code>AND</code></td>
<td><code>dp, #imm </code></td>
<td><code>38</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>(dp) &amp;= imm</code></td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, #imm  </code></td>
<td><code>08</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td>A | imm</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, (X)   </code></td>
<td><code>06</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td>A | (X)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, dp    </code></td>
<td><code>04</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td>A | (dp)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, dp+X  </code></td>
<td><code>14</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td>A | (dp+X)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, !abs  </code></td>
<td><code>05</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td>A | (abs)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, !abs+X</code></td>
<td><code>15</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td>A | (abs+X)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, !abs+Y</code></td>
<td><code>16</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td>A | (abs+Y)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, [dp+X]</code></td>
<td><code>07</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td>A | (abs:(dp+X))</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>17</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td>A | (abs:(dp)+Y)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>(X), (Y) </code></td>
<td><code>19</code></td>
<td>1</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td>(X) | (Y)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>dp, dp   </code></td>
<td><code>09</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td>(dp) | (dp)</td>
</tr>
<tr>
<td><code>OR </code></td>
<td><code>dp, #imm </code></td>
<td><code>18</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td>(dp) | imm</td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, #imm  </code></td>
<td><code>48</code></td>
<td>2</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= imm</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, (X)   </code></td>
<td><code>46</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (X)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, dp    </code></td>
<td><code>44</code></td>
<td>2</td>
<td>3</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (dp)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, dp+X  </code></td>
<td><code>54</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (dp+X)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, !abs  </code></td>
<td><code>45</code></td>
<td>3</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (abs)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, !abs+X</code></td>
<td><code>55</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (abs+X)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, !abs+Y</code></td>
<td><code>56</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (abs+Y)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, [dp+X]</code></td>
<td><code>47</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (abs:(dp+X))</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>A, [dp]+Y</code></td>
<td><code>57</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>A ^= (abs:(dp)+Y))</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>(X), (Y) </code></td>
<td><code>59</code></td>
<td>1</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>(X) ^= (Y)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>dp, dp   </code></td>
<td><code>49</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>(dp) ^= (dp)</code></td>
</tr>
<tr>
<td><code>EOR</code></td>
<td><code>dp, #imm </code></td>
<td><code>58</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>(dp) ^= imm</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-33">8-bit Increment / Decrement Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INC</code></td>
<td><code>A   </code></td>
<td><code>BC</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>++A</code></td>
</tr>
<tr>
<td><code>INC</code></td>
<td><code>dp  </code></td>
<td><code>AB</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>++(dp)</code></td>
</tr>
<tr>
<td><code>INC</code></td>
<td><code>dp+X</code></td>
<td><code>BB</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>++(dp+X)</code></td>
</tr>
<tr>
<td><code>INC</code></td>
<td><code>!abs</code></td>
<td><code>AC</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>++(abs)</code></td>
</tr>
<tr>
<td><code>INC</code></td>
<td><code>X   </code></td>
<td><code>3D</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>++X</code></td>
</tr>
<tr>
<td><code>INC</code></td>
<td><code>Y   </code></td>
<td><code>FC</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>++Y</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>A   </code></td>
<td><code>9C</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>--A</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>dp  </code></td>
<td><code>8B</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----Z-</code></td>
<td><code>--(dp)</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>dp+X</code></td>
<td><code>9B</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>--(dp+X)</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>!abs</code></td>
<td><code>8C</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>--(abs)</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>X   </code></td>
<td><code>1D</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>--X</code></td>
</tr>
<tr>
<td><code>DEC</code></td>
<td><code>Y   </code></td>
<td><code>DC</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----Z-</code></td>
<td><code>--Y</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-34">8-bit Shift / Rotation Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASL</code></td>
<td><code>A   </code></td>
<td><code>1C</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; A      &lt;&lt; 0</code></td>
</tr>
<tr>
<td><code>ASL</code></td>
<td><code>dp  </code></td>
<td><code>0B</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (dp)   &lt;&lt; 0</code></td>
</tr>
<tr>
<td><code>ASL</code></td>
<td><code>dp+X</code></td>
<td><code>1B</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (dp+X) &lt;&lt; 0</code></td>
</tr>
<tr>
<td><code>ASL</code></td>
<td><code>!abs</code></td>
<td><code>0C</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (abs)  &lt;&lt; 0</code></td>
</tr>
<tr>
<td><code>LSR</code></td>
<td><code>A   </code></td>
<td><code>5C</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>0 &gt;&gt; A      &gt;&gt; C</code></td>
</tr>
<tr>
<td><code>LSR</code></td>
<td><code>dp  </code></td>
<td><code>4B</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>0 &gt;&gt; (dp)   &gt;&gt; C</code></td>
</tr>
<tr>
<td><code>LSR</code></td>
<td><code>dp+X</code></td>
<td><code>5B</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>0 &gt;&gt; (dp+X) &gt;&gt; C</code></td>
</tr>
<tr>
<td><code>LSR</code></td>
<td><code>!abs</code></td>
<td><code>4C</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>0 &gt;&gt; (abs)  &gt;&gt; C</code></td>
</tr>
<tr>
<td><code>ROL</code></td>
<td><code>A   </code></td>
<td><code>3C</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; A      &lt;&lt; C  :the last carry value is shifted</code></td>
</tr>
<tr>
<td><code>ROL</code></td>
<td><code>dp  </code></td>
<td><code>2B</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (dp)   &lt;&lt; C  :into A, not the one you just shifted out!</code></td>
</tr>
<tr>
<td><code>ROL</code></td>
<td><code>dp+X</code></td>
<td><code>3B</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (dp+X) &lt;&lt; C  :</code></td>
</tr>
<tr>
<td><code>ROL</code></td>
<td><code>!abs</code></td>
<td><code>2C</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &lt;&lt; (abs)  &lt;&lt; C  :</code></td>
</tr>
<tr>
<td><code>ROR</code></td>
<td><code>A   </code></td>
<td><code>7C</code></td>
<td>1</td>
<td>2</td>
<td><code>N-----ZC</code></td>
<td><code>C &gt;&gt; A      &gt;&gt; C  :same with these</code></td>
</tr>
<tr>
<td><code>ROR</code></td>
<td><code>dp  </code></td>
<td><code>6B</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>C &gt;&gt; (dp)   &gt;&gt; C  :</code></td>
</tr>
<tr>
<td><code>ROR</code></td>
<td><code>dp+X</code></td>
<td><code>7B</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &gt;&gt; (dp+X) &gt;&gt; C  :</code></td>
</tr>
<tr>
<td><code>ROR</code></td>
<td><code>!abs</code></td>
<td><code>6C</code></td>
<td>3</td>
<td>5</td>
<td><code>N-----ZC</code></td>
<td><code>C &gt;&gt; (abs)  &gt;&gt; C  :</code></td>
</tr>
<tr>
<td><code>XCN</code></td>
<td><code>A   </code></td>
<td><code>9F</code></td>
<td>1</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>Swaps the nibbles in A (A = (A&gt;&gt;4) l (A&lt;&lt;4))</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-35">16-bit Data Transmission Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MOVW</code></td>
<td><code>YA, dp</code></td>
<td><code>BA</code></td>
<td>2</td>
<td>5</td>
<td><code>N-----Z-</code></td>
<td><code>YA &lt;- word:(dp)</code></td>
</tr>
<tr>
<td><code>MOVW</code></td>
<td><code>dp, YA</code></td>
<td><code>DA</code></td>
<td>2</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>YA -&gt; word:(dp) :same cycles as writing 1 byte!</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-36">16-bit Arithmetic Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INCW</code></td>
<td><code>dp    </code></td>
<td><code>3A</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>++word:(dp)</code></td>
</tr>
<tr>
<td><code>DECW</code></td>
<td><code>dp    </code></td>
<td><code>1A</code></td>
<td>2</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>--word:(dp)</code></td>
</tr>
<tr>
<td><code>ADDW</code></td>
<td><code>YA, dp</code></td>
<td><code>7A</code></td>
<td>2</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>YA += word:(dp)</code></td>
</tr>
<tr>
<td><code>SUBW</code></td>
<td><code>YA, dp</code></td>
<td><code>9A</code></td>
<td>2</td>
<td>5</td>
<td><code>NV--H-ZC</code></td>
<td><code>YA -= word:(dp)</code></td>
</tr>
<tr>
<td><code>CMPW</code></td>
<td><code>YA, dp</code></td>
<td><code>5A</code></td>
<td>2</td>
<td>4</td>
<td><code>N-----ZC</code></td>
<td><code>YA - word:(dp)</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-37">Multiplication / Division Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MUL</code></td>
<td><code>YA  </code></td>
<td><code>CF</code></td>
<td>1</td>
<td>9</td>
<td><code>N-----Z-</code></td>
<td><code>YA &lt;- Y*A</code></td>
</tr>
<tr>
<td><code>DIV</code></td>
<td><code>YA,X</code></td>
<td><code>9E</code></td>
<td>1</td>
<td>12</td>
<td><code>NV--H-Z-</code></td>
<td><code>Y &lt;- YA % X and A &lt;- YA / X</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-38">Decimal Compensation Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DAA</code></td>
<td><code>A</code></td>
<td><code>DF</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td>Decimal adjust for addition</td>
</tr>
<tr>
<td><code>DAS</code></td>
<td><code>A</code></td>
<td><code>BE</code></td>
<td>1</td>
<td>3</td>
<td><code>N-----ZC</code></td>
<td>Decimal adjust for subtraction</td>
</tr>
</tbody>
</table>
<h3 id="toc-39">Program Flow Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BRA </code></td>
<td><code>rel       </code></td>
<td><code>2F</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>Branch (always)           : branch always is slower than jump,</code></td>
</tr>
<tr>
<td><code>BEQ </code></td>
<td><code>rel       </code></td>
<td><code>F0</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Equal (Z=1)     : but branches uses relative addressing</code></td>
</tr>
<tr>
<td><code>BNE </code></td>
<td><code>rel       </code></td>
<td><code>D0</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Not Equal (Z=0) : (2 bytes instead of 3)</code></td>
</tr>
<tr>
<td><code>BCS </code></td>
<td><code>rel       </code></td>
<td><code>B0</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Carry Set</code></td>
</tr>
<tr>
<td><code>BCC </code></td>
<td><code>rel       </code></td>
<td><code>90</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Carry Cleared</code></td>
</tr>
<tr>
<td><code>BVS </code></td>
<td><code>rel       </code></td>
<td><code>70</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if V=1</code></td>
</tr>
<tr>
<td><code>BVC </code></td>
<td><code>rel       </code></td>
<td><code>50</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if V=0</code></td>
</tr>
<tr>
<td><code>BMI </code></td>
<td><code>rel       </code></td>
<td><code>30</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Negative (N=1)</code></td>
</tr>
<tr>
<td><code>BPL </code></td>
<td><code>rel       </code></td>
<td><code>10</code></td>
<td>2</td>
<td>2/4</td>
<td><code>--------</code></td>
<td><code>Branch if Positive (N=0)</code></td>
</tr>
<tr>
<td><code>BBS </code></td>
<td><code>dp,bit,rel</code></td>
<td><code>X3</code></td>
<td>3</td>
<td>5/7</td>
<td><code>--------</code></td>
<td><code>Branch if memory bit set</code></td>
</tr>
<tr>
<td><code>BBC </code></td>
<td><code>dp,bit,rel</code></td>
<td><code>Y3</code></td>
<td>3</td>
<td>5/7</td>
<td><code>--------</code></td>
<td><code>Branch if memory bit cleared</code></td>
</tr>
<tr>
<td><code>CBNE</code></td>
<td><code>dp, rel   </code></td>
<td><code>2E</code></td>
<td>3</td>
<td>5/7</td>
<td><code>--------</code></td>
<td><code>Branch if A != (dp)</code></td>
</tr>
<tr>
<td><code>CBNE</code></td>
<td><code>dp+X,rel  </code></td>
<td><code>DE</code></td>
<td>3</td>
<td>6/8</td>
<td><code>--------</code></td>
<td><code>Branch if A != (dp+X)</code></td>
</tr>
<tr>
<td><code>DBNZ</code></td>
<td><code>dp,rel    </code></td>
<td><code>6E</code></td>
<td>3</td>
<td>5/7</td>
<td><code>--------</code></td>
<td><code>--(dp) and branch if not zero</code></td>
</tr>
<tr>
<td><code>DBNZ</code></td>
<td><code>Y,rel     </code></td>
<td><code>FE</code></td>
<td>2</td>
<td>4/6</td>
<td><code>--------</code></td>
<td><code>--Y and branch if not zero</code></td>
</tr>
<tr>
<td><code>JMP </code></td>
<td><code>!abs      </code></td>
<td><code>5F</code></td>
<td>3</td>
<td>3</td>
<td><code>--------</code></td>
<td><code>PC &lt;- abs     : allows to jump anywhere in the memory space</code></td>
</tr>
<tr>
<td><code>JMP </code></td>
<td><code>[!abs+X]  </code></td>
<td><code>1F</code></td>
<td>3</td>
<td>6</td>
<td><code>--------</code></td>
<td><code>PC &lt;- abs:(abs+X)</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-40">Subroutine Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CALL </code></td>
<td><code>!abs </code></td>
<td><code>3F</code></td>
<td>3</td>
<td>8</td>
<td><code>--------</code></td>
<td>Subroutine call :pushes PC to stack and begins execution from abs</td>
</tr>
<tr>
<td><code>PCALL</code></td>
<td><code>upage</code></td>
<td><code>4F</code></td>
<td>2</td>
<td>6</td>
<td><code>--------</code></td>
<td>Upage call (???)</td>
</tr>
<tr>
<td><code>TCALL</code></td>
<td><code>   </code></td>
<td><code>N1</code></td>
<td>1</td>
<td>8</td>
<td><code>--------</code></td>
<td>Table call (??:)</td>
</tr>
<tr>
<td><code>BRK  </code></td>
<td><code>   </code></td>
<td><code>0F</code></td>
<td>1</td>
<td>8</td>
<td><code>---1-0--</code></td>
<td>Software interrupt (???)</td>
</tr>
<tr>
<td><code>RET  </code></td>
<td><code>   </code></td>
<td><code>6F</code></td>
<td>1</td>
<td>5</td>
<td><code>--------</code></td>
<td>Return from subroutine (PC is popped)</td>
</tr>
<tr>
<td><code>RETI </code></td>
<td><code>   </code></td>
<td><code>7F</code></td>
<td>1</td>
<td>6</td>
<td><code>RESTORED</code></td>
<td>Return from interrupt (PC and PSW are popped)</td>
</tr>
</tbody>
</table>
<h3 id="toc-41">Stack Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PUSH</code></td>
<td><code>A  </code></td>
<td><code>2D</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Push A to stack</td>
</tr>
<tr>
<td><code>PUSH</code></td>
<td><code>X  </code></td>
<td><code>4D</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Push X to stack</td>
</tr>
<tr>
<td><code>PUSH</code></td>
<td><code>Y  </code></td>
<td><code>6D</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Push Y to stack</td>
</tr>
<tr>
<td><code>PUSH</code></td>
<td><code>PSW</code></td>
<td><code>0D</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Push PSW to stack</td>
</tr>
<tr>
<td><code>POP </code></td>
<td><code>A  </code></td>
<td><code>AE</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Pop A from stack</td>
</tr>
<tr>
<td><code>POP </code></td>
<td><code>X  </code></td>
<td><code>CE</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Pop X from stack</td>
</tr>
<tr>
<td><code>POP </code></td>
<td><code>Y  </code></td>
<td><code>EE</code></td>
<td>1</td>
<td>4</td>
<td><code>--------</code></td>
<td>Pop Y from stack</td>
</tr>
<tr>
<td><code>POP </code></td>
<td><code>PSW</code></td>
<td><code>8E</code></td>
<td>1</td>
<td>4</td>
<td><code>RESTORED</code></td>
<td>Pop PSW from stack :can be used to set PSW bits</td>
</tr>
</tbody>
</table>
<h3 id="toc-42">Bit Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SET1 </code></td>
<td><code>dp, bit   </code></td>
<td><code>X2</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>Set bit in direct page   : note that with the TASM table provided, these</code></td>
</tr>
<tr>
<td><code>CLR1 </code></td>
<td><code>dp, bit   </code></td>
<td><code>Y2</code></td>
<td>2</td>
<td>4</td>
<td><code>--------</code></td>
<td><code>Clear bit in direct page : instructions are done with "SETx/CLRx dp" where x is the bit#</code></td>
</tr>
<tr>
<td><code>TSET1</code></td>
<td><code>!abs      </code></td>
<td><code>0E</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>Test and set bits with A (???)</code></td>
</tr>
<tr>
<td><code>TCLR1</code></td>
<td><code>!abs      </code></td>
<td><code>4E</code></td>
<td>3</td>
<td>6</td>
<td><code>N-----Z-</code></td>
<td><code>Test and clear bits with A (???)</code></td>
</tr>
<tr>
<td><code>AND1 </code></td>
<td><code>C,mem,bit </code></td>
<td><code>4A</code></td>
<td>3</td>
<td>4</td>
<td><code>-------C</code></td>
<td><code>C &amp;= mem:bit     :to use these instructions</code></td>
</tr>
<tr>
<td><code>AND1 </code></td>
<td><code>C,/mem,bit</code></td>
<td><code>6A</code></td>
<td>3</td>
<td>4</td>
<td><code>-------C</code></td>
<td><code>C &amp;= ~mem:bit    :with the TASM table</code></td>
</tr>
<tr>
<td><code>OR1  </code></td>
<td><code>C,mem,bit </code></td>
<td><code>0A</code></td>
<td>3</td>
<td>5</td>
<td><code>-------C</code></td>
<td><code>C l= mem:bit     :the syntax is a bit wierd</code></td>
</tr>
<tr>
<td><code>OR1  </code></td>
<td><code>C,/mem,bit</code></td>
<td><code>2A</code></td>
<td>3</td>
<td>5</td>
<td><code>-------C</code></td>
<td><code>C l= ~mem:bit    : "for MOV1 mem,bit,C" it is:</code></td>
</tr>
<tr>
<td><code>EOR1 </code></td>
<td><code>C,mem,bit </code></td>
<td><code>8A</code></td>
<td>3</td>
<td>5</td>
<td><code>-------C</code></td>
<td><code>C ^= mem:bit     : MOV1 (mem + (bit &lt;&lt; 13)),C</code></td>
</tr>
<tr>
<td><code>NOT1 </code></td>
<td><code>mem,bit   </code></td>
<td><code>EA</code></td>
<td>3</td>
<td>5</td>
<td><code>--------</code></td>
<td><code>Complement mem:bit</code></td>
</tr>
<tr>
<td><code>MOV1 </code></td>
<td><code>C,mem,bit </code></td>
<td><code>AA</code></td>
<td>3</td>
<td>4</td>
<td><code>-------C</code></td>
<td><code>C &lt;- mem:bit</code></td>
</tr>
<tr>
<td><code>MOV1 </code></td>
<td><code>mem,bit,C </code></td>
<td><code>CA</code></td>
<td>3</td>
<td>6</td>
<td><code>--------</code></td>
<td><code>C -&gt; mem:bit</code></td>
</tr>
</tbody>
</table>
<h3 id="toc-43">PSW Operations</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CLRC</code></td>
<td></td>
<td><code>60</code></td>
<td>1</td>
<td>2</td>
<td><code>-------0</code></td>
<td>Clear Carry</td>
</tr>
<tr>
<td><code>SETC</code></td>
<td></td>
<td><code>80</code></td>
<td>1</td>
<td>2</td>
<td><code>-------1</code></td>
<td>Set Carry</td>
</tr>
<tr>
<td><code>NOTC</code></td>
<td></td>
<td><code>ED</code></td>
<td>1</td>
<td>3</td>
<td><code>-------c</code></td>
<td>Complement Carry</td>
</tr>
<tr>
<td><code>CLRV</code></td>
<td></td>
<td><code>E0</code></td>
<td>1</td>
<td>2</td>
<td><code>-0--0---</code></td>
<td>Clear V and H</td>
</tr>
<tr>
<td><code>CLRP</code></td>
<td></td>
<td><code>20</code></td>
<td>1</td>
<td>2</td>
<td><code>--0-----</code></td>
<td>Clear DP page to 0</td>
</tr>
<tr>
<td><code>SETP</code></td>
<td></td>
<td><code>40</code></td>
<td>1</td>
<td>2</td>
<td><code>--1-----</code></td>
<td>Set DP page to 1</td>
</tr>
<tr>
<td><code>EI  </code></td>
<td></td>
<td><code>A0</code></td>
<td>1</td>
<td>3</td>
<td><code>------1-</code></td>
<td>Enable Interrupts (but interrupts are not supported)</td>
</tr>
<tr>
<td><code>DI  </code></td>
<td></td>
<td><code>C0</code></td>
<td>1</td>
<td>3</td>
<td><code>------0-</code></td>
<td>Disable Interrupts (but interrupts are not supported)</td>
</tr>
</tbody>
</table>
<h3 id="toc-44">Other Commands</h3>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Operand</th>
<th>Opcode</th>
<th>Bytes</th>
<th>Cycles</th>
<th>Flags (<code>NVPBHIZC</code>)</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NOP  </code></td>
<td></td>
<td><code>00</code></td>
<td>1</td>
<td>2</td>
<td><code>--------</code></td>
<td>Delay</td>
</tr>
<tr>
<td><code>SLEEP</code></td>
<td></td>
<td><code>EF</code></td>
<td>1</td>
<td>3</td>
<td><code>--------</code></td>
<td>Standby SLEEP mode</td>
</tr>
<tr>
<td><code>STOP </code></td>
<td></td>
<td><code>FF</code></td>
<td>1</td>
<td>3</td>
<td><code>--------</code></td>
<td>Standby STOP mode</td>
</tr>
</tbody>
</table>
<h3 id="toc-45">Special Notes</h3>
<p>(X), (Y) are direct page addresses too! Assume addition of <code>100h</code> if the P flag is set.</p>
<p><code>DIV</code> only works if the resulting quotient is &lt; <code>200h</code>; the output registers contain garbage if the quotient exceeds this.</p>
<h3 id="toc-46">Bit Rate Reduction (BRR)</h3>
<p>BRR is the compression format used by the DSP. It's a series of 9 byte blocks containing a header and 8 bytes of sample data. It looks like this:</p>
<pre><code class="hljs ruby">BRR BLOCK
      <span class="hljs-number">8</span>     <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
   +-----+-----+-----+-----+-----+-----+-----+-----+-----+
   <span class="hljs-params">| E F |</span> C D <span class="hljs-params">| A B |</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span> <span class="hljs-params">| 6 7 |</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-params">| 2 3 |</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-params">| HEAD|</span>
   +-----+-----+-----+-----+-----+-----+-----+-----+-----+
                                               ^
                                  the lower sample is <span class="hljs-keyword">in</span> the high nibble

BRR HEAD
      <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
   +-----+-----+-----+-----+-----+-----+-----+-----+
   <span class="hljs-params">|         RANGE         |</span>   FILTER  <span class="hljs-params">|LOOP |</span> <span class="hljs-keyword">END</span> <span class="hljs-params">|
   +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>RANGE: This is a shift value for the 4-bit data.</p>
<p>FILTER: This selects a filter for the decompression.</p>
<p>LOOP: This flag is set if the sample loops (commercial games set this for all blocks in looped samples).</p>
<p>END: When the decoder reads this bit, it will stop the sample (or restart from loop point) and set a bit in <code>ENDX</code>.</p>
<p><em>Example Decompression Routine:</em></p>
<p>NOTICE! This is only an approximation of the decompression routine performed by the DSP, look at some BRR compression source-code (like DMV47's) for an accurate example!</p>
<pre><code class="hljs armasm"><span class="hljs-symbol">Sample</span> Decompression Routine:
<span class="hljs-number">1</span>. Read <span class="hljs-number">4</span> <span class="hljs-keyword">bits </span>from source <span class="hljs-meta">data</span>. (SAMPLE)
<span class="hljs-number">2</span>. Shift the <span class="hljs-keyword">bits </span>left <span class="hljs-keyword">by </span>RANGE.
<span class="hljs-number">3</span>. <span class="hljs-meta">Get</span> filter coefficients a&amp;<span class="hljs-keyword">b </span>from table <span class="hljs-keyword">below.
</span><span class="hljs-number">4</span>. <span class="hljs-keyword">Add </span>`LAST_SAMPLE1 * a` to SAMPLE.
<span class="hljs-number">5</span>. <span class="hljs-keyword">Add </span>`LAST_SAMPLE2 * <span class="hljs-keyword">b` </span>to SAMPLE.
<span class="hljs-number">6</span>. LAST_SAMPLE2 = LAST_SAMPLE1.
<span class="hljs-number">7</span>. LAST_SAMPLE1 = SAMPLE.
<span class="hljs-number">8</span>. Output SAMPLE.

<span class="hljs-symbol">Filter</span>  Coef A   Coef <span class="hljs-keyword">B
</span>  <span class="hljs-number">0</span> <span class="hljs-number">0</span>    <span class="hljs-number">0</span>
  <span class="hljs-number">1</span> <span class="hljs-number">0</span>.<span class="hljs-number">9375</span>   <span class="hljs-number">0</span>
  <span class="hljs-number">2</span> <span class="hljs-number">1</span>.<span class="hljs-number">90625</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">9375</span>
  <span class="hljs-number">3</span> <span class="hljs-number">1</span>.<span class="hljs-number">796875</span> -<span class="hljs-number">0</span>.<span class="hljs-number">8125</span>
</code></pre>
<h2 id="toc-7">DSP</h2>
<h3 id="toc-47">DSP Register Map</h3>
<p><code>-</code> prefix indiciates that the register will be written to by the DSP during activity. For each voice (x=voice#):</p>
<table>
<thead>
<tr>
<th>Address</th>
<th>Register</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x0</code></td>
<td><code>VOL (L) </code></td>
<td>Left channel volume.</td>
</tr>
<tr>
<td><code>x1</code></td>
<td><code>VOL (R) </code></td>
<td>Right channel volume.</td>
</tr>
<tr>
<td><code>x2</code></td>
<td><code>P (L)   </code></td>
<td>Lower 8 bits of pitch.</td>
</tr>
<tr>
<td><code>x3</code></td>
<td><code>P (H)   </code></td>
<td>Higher 8-bits of pitch.</td>
</tr>
<tr>
<td><code>x4</code></td>
<td><code>SRCN    </code></td>
<td>Source number (0-255). (references the source directory)</td>
</tr>
<tr>
<td><code>x5</code></td>
<td><code>ADSR (1)</code></td>
<td>If bit7 is set, ADSR is enabled. If cleared GAIN is used.</td>
</tr>
<tr>
<td><code>x6</code></td>
<td><code>ADSR (2)</code></td>
<td>These two registers control the ADSR envelope.</td>
</tr>
<tr>
<td><code>x7</code></td>
<td><code>GAIN    </code></td>
<td>This register provides function for software envelopes.</td>
</tr>
<tr>
<td><code>x8</code></td>
<td><code>-ENVX   </code></td>
<td>The DSP writes the current value of the envelope to this register. (read it)</td>
</tr>
<tr>
<td><code>x9</code></td>
<td><code>-OUTX   </code></td>
<td>The DSP writes the current waveform value after envelope multiplication and before volume multiplication.</td>
</tr>
<tr>
<td><code>0C</code></td>
<td><code>MVOL (L)</code></td>
<td>Main Volume (left output)</td>
</tr>
<tr>
<td><code>1C</code></td>
<td><code>MVOL (R)</code></td>
<td>Main Volume (right output)</td>
</tr>
<tr>
<td><code>2C</code></td>
<td><code>EVOL (L)</code></td>
<td>Echo Volume (left output)</td>
</tr>
<tr>
<td><code>3C</code></td>
<td><code>EVOL (R)</code></td>
<td>Echo Volume (right output)</td>
</tr>
<tr>
<td><code>4C</code></td>
<td><code>KON     </code></td>
<td>Key On (1 bit for each voice)</td>
</tr>
<tr>
<td><code>5C</code></td>
<td><code>KOF     </code></td>
<td>Key Off (1 bit for each voice)</td>
</tr>
<tr>
<td><code>6C</code></td>
<td><code>FLG     </code></td>
<td>DSP Flags. (used for MUTE,ECHO,RESET,NOISE CLOCK)</td>
</tr>
<tr>
<td><code>7C</code></td>
<td><code>-ENDX   </code></td>
<td>1 bit for each voice.</td>
</tr>
<tr>
<td><code>0D</code></td>
<td><code>EFB     </code></td>
<td>Echo Feedback</td>
</tr>
<tr>
<td><code>1D</code></td>
<td><code>---     </code></td>
<td>Not used</td>
</tr>
<tr>
<td><code>2D</code></td>
<td><code>PMON    </code></td>
<td>Pitch modulation</td>
</tr>
<tr>
<td><code>3D</code></td>
<td><code>NON     </code></td>
<td>Noise enable</td>
</tr>
<tr>
<td><code>4D</code></td>
<td><code>EON     </code></td>
<td>Echo enable</td>
</tr>
<tr>
<td><code>5D</code></td>
<td><code>DIR     </code></td>
<td>Offset of source directory (<code>DIR*100h</code> = memory offset)</td>
</tr>
<tr>
<td><code>6D</code></td>
<td><code>ESA     </code></td>
<td>Echo buffer start offset (<code>ESA*100h</code> = memory offset)</td>
</tr>
<tr>
<td><code>7D</code></td>
<td><code>EDL     </code></td>
<td>Echo delay, 4-bits, higher values require more memory.</td>
</tr>
<tr>
<td><code>xF</code></td>
<td><code>COEF    </code></td>
<td>8-tap FIR Filter coefficients</td>
</tr>
</tbody>
</table>
<h3 id="toc-48">DSP Voice Register: VOL</h3>
<p>There are some undocumented quirks (emulated though) that I experienced when using these registers (while writing XMSNES). Sometimes the value I write gets ignored.. (or something), I'm not really sure what the exact problem is.</p>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x0   <span class="hljs-params">| sign|</span>              Volume Left                <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x1   |</span> sign<span class="hljs-params">|              Volume Right               |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

Volume, <span class="hljs-number">8</span>-bit signed value.
</code></pre>
<h3 id="toc-49">DSP Voice Register: P</h3>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x2   <span class="hljs-params">|               Lower 8-bits of Pitch           |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x3   <span class="hljs-params">|  -  |</span>  -  <span class="hljs-params">|   Higher 6-bits of Pitch          |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

Pitch is a <span class="hljs-number">14</span>-bit value.
</code></pre>
<p>The pitch can be calculated with this formula:</p>
<pre><code class="hljs armasm"><span class="hljs-symbol">Let</span> desired DSP pitch <span class="hljs-keyword">be </span>P.

<span class="hljs-symbol">Pitch</span>-&gt;Hz
               P
<span class="hljs-symbol">HZ</span> = <span class="hljs-number">32000</span> * ------
              <span class="hljs-number">2</span>^<span class="hljs-number">12</span>

(HZ = P * <span class="hljs-number">7</span>.<span class="hljs-number">8125</span>)

<span class="hljs-symbol">Hz</span>-&gt;Pitch
             HZ
P = <span class="hljs-number">2</span>^<span class="hljs-number">12</span> * -------
            <span class="hljs-number">32000</span>

(P = HZ / <span class="hljs-number">7</span>.<span class="hljs-number">8125</span>)
</code></pre>
<p>The highest pitch will reproduce the sound at approx. 2 octaves higher (~128KHz sample rate). The lowest pitch is basically not limited (but you will lose accuracy at lower pitches).</p>
<pre><code class="hljs ruby">A few pitch-&gt;interval relations...

    <span class="hljs-number">400</span>h     <span class="hljs-number">800</span>h   <span class="hljs-number">1000</span>h     <span class="hljs-number">2000</span>h   <span class="hljs-number">3</span>FFFh
-----<span class="hljs-params">|--------|</span>-------<span class="hljs-params">|---------|</span>-------<span class="hljs-params">|-----
   -2oct   -1oct   original   +1oct   +2oct
                    sound
                (best quality!)
</span></code></pre>
<h3 id="toc-50">DSP Voice Register: SRCN</h3>
<p>Source number is a reference to the "Source Directory" (see <code>DIR</code>). The DSP will use the sample with this index from the directory. I'm not sure what happens when you change the <code>SRCN</code> when the channel is active, but it probably doesn't have any effect until KON is set.</p>
<pre><code class="hljs ruby">
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x4   <span class="hljs-params">|                 Source Number                 |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<h3 id="toc-51">DSP Voice Register: ADSR</h3>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x5   <span class="hljs-params">|ENABL|</span>        DR       <span class="hljs-params">|          AR           |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x6   <span class="hljs-params">|     SL          |</span>          SR                 <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>The ENABL bit determines which envelope mode to use. If this bit is set then <code>ADSR</code> is used, otherwise <code>GAIN</code> is operative.</p>
<p>My knowledge about DSP stuff is a bit low. Some enlightenment on how the <code>ADSR</code> works would be greatly appreciated!</p>
<pre><code class="hljs ruby">Table <span class="hljs-number">2.2</span> ADSR Parameters

AR  TIME FROM <span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>    DR  TIME FROM <span class="hljs-number">1</span>-&gt;SL    SL  RATIO    SR  TIME FROM <span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>
<span class="hljs-number">00</span>  <span class="hljs-number">4.1</span> sec           <span class="hljs-number">00</span>  <span class="hljs-number">1.2</span> sec            <span class="hljs-number">00</span>  <span class="hljs-number">1</span>/<span class="hljs-number">8</span>      <span class="hljs-number">00</span>  Infinite
<span class="hljs-number">01</span>  <span class="hljs-number">2.5</span> sec           <span class="hljs-number">01</span>  <span class="hljs-number">740</span> msec           <span class="hljs-number">01</span>  <span class="hljs-number">2</span>/<span class="hljs-number">8</span>      <span class="hljs-number">01</span>   <span class="hljs-number">38</span> sec
<span class="hljs-number">02</span>  <span class="hljs-number">1.5</span> sec           <span class="hljs-number">02</span>  <span class="hljs-number">440</span> msec           <span class="hljs-number">02</span>  <span class="hljs-number">3</span>/<span class="hljs-number">8</span>      <span class="hljs-number">02</span>   <span class="hljs-number">28</span> sec
<span class="hljs-number">03</span>  <span class="hljs-number">1.0</span> sec           <span class="hljs-number">03</span>  <span class="hljs-number">290</span> msec           <span class="hljs-number">03</span>  <span class="hljs-number">4</span>/<span class="hljs-number">8</span>      <span class="hljs-number">03</span>   <span class="hljs-number">24</span> sec
<span class="hljs-number">04</span>  <span class="hljs-number">640</span> msec          <span class="hljs-number">04</span>  <span class="hljs-number">180</span> msec           <span class="hljs-number">04</span>  <span class="hljs-number">5</span>/<span class="hljs-number">8</span>      <span class="hljs-number">04</span>   <span class="hljs-number">19</span> sec
<span class="hljs-number">05</span>  <span class="hljs-number">380</span> msec          <span class="hljs-number">05</span>  <span class="hljs-number">110</span> msec           <span class="hljs-number">05</span>  <span class="hljs-number">6</span>/<span class="hljs-number">8</span>      <span class="hljs-number">05</span>   <span class="hljs-number">14</span> sec
<span class="hljs-number">06</span>  <span class="hljs-number">260</span> msec          <span class="hljs-number">06</span>   <span class="hljs-number">74</span> msec           <span class="hljs-number">06</span>  <span class="hljs-number">7</span>/<span class="hljs-number">8</span>      <span class="hljs-number">06</span>   <span class="hljs-number">12</span> sec
<span class="hljs-number">07</span>  <span class="hljs-number">160</span> msec          <span class="hljs-number">07</span>   <span class="hljs-number">37</span> msec           <span class="hljs-number">07</span>  <span class="hljs-number">8</span>/<span class="hljs-number">8</span>      <span class="hljs-number">07</span>  <span class="hljs-number">9.4</span> sec
08   <span class="hljs-number">96</span> msec                                              08  <span class="hljs-number">7.1</span> sec
09   <span class="hljs-number">64</span> msec                                              09  <span class="hljs-number">5.9</span> sec
0A   <span class="hljs-number">40</span> msec                                              0A  <span class="hljs-number">4.7</span> sec
0B   <span class="hljs-number">24</span> msec                                              0B  <span class="hljs-number">3.5</span> sec
0C   <span class="hljs-number">16</span> msec                                              0C  <span class="hljs-number">2.9</span> sec
0D   <span class="hljs-number">10</span> msec                                              0D  <span class="hljs-number">2.4</span> sec
0E    <span class="hljs-number">6</span> msec                                              0E  <span class="hljs-number">1.8</span> sec
0F    <span class="hljs-number">0</span> msec                                              0F  <span class="hljs-number">1.5</span> sec
                                                          <span class="hljs-number">10</span>  <span class="hljs-number">1.2</span> sec
                                                          <span class="hljs-number">11</span>  <span class="hljs-number">880</span> msec
                                                          <span class="hljs-number">12</span>  <span class="hljs-number">740</span> msec
     <span class="hljs-params">|                                                    13  590 msec
     |</span>                                                    <span class="hljs-number">14</span>  <span class="hljs-number">440</span> msec
   <span class="hljs-number">1</span> <span class="hljs-params">|--------                                            15  370 msec
     |</span>       /\                                           <span class="hljs-number">16</span>  <span class="hljs-number">290</span> msec
     <span class="hljs-params">|      /|</span> \                                          <span class="hljs-number">17</span>  <span class="hljs-number">220</span> msec
     <span class="hljs-params">|     / |</span>  \                                         <span class="hljs-number">18</span>  <span class="hljs-number">180</span> msec
     <span class="hljs-params">|    /  |</span>   \                                        <span class="hljs-number">19</span>  <span class="hljs-number">150</span> msec
   SL<span class="hljs-params">|---/---|</span>-----\_<span class="hljs-number">_</span>                                    <span class="hljs-number">1</span>A  <span class="hljs-number">110</span> msec
     <span class="hljs-params">|  /    |</span>    <span class="hljs-params">|   \___                                1B   92 msec
     |</span> /     <span class="hljs-params">|    |</span>       \________________<span class="hljs-number">_</span>              <span class="hljs-number">1</span>C   <span class="hljs-number">74</span> msec
     <span class="hljs-params">|/AR    |</span> DR <span class="hljs-params">|           SR            \   t         1D   55 msec
     |</span>-------------------------------------------         <span class="hljs-number">1</span>E   <span class="hljs-number">37</span> msec
     <span class="hljs-number">0</span>                                      <span class="hljs-params">|             1F   18 msec

     key on                                Key off
       (cool ascii picture taken from "APU MANUAL IN TEXT BY LEDI")
</span></code></pre>
<h3 id="toc-52">DSP Voice Register: GAIN</h3>
<p>GAIN can be used to implement custom envelopes in your program. There are 5 modes GAIN uses.</p>
<pre><code class="hljs ruby">DIRECT

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x7   <span class="hljs-params">|  0  |</span>               PARAMETER                 <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

INCREASE (LINEAR)
         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x7   |</span>  <span class="hljs-number">1</span>  <span class="hljs-params">|  1  |</span>  <span class="hljs-number">0</span>  <span class="hljs-params">|          PARAMETER          |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

INCREASE (BENT LINE)

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x7   <span class="hljs-params">|  1  |</span>  <span class="hljs-number">1</span>  <span class="hljs-params">|  1  |</span>          PARAMETER          <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

DECREASE (LINEAR)

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x7   |</span>  <span class="hljs-number">1</span>  <span class="hljs-params">|  0  |</span>  <span class="hljs-number">0</span>  <span class="hljs-params">|          PARAMETER          |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

DECREASE (EXPONENTIAL)

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x7   <span class="hljs-params">|  1  |</span>  <span class="hljs-number">0</span>  <span class="hljs-params">|  1  |</span>          PARAMETER          <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>Direct: The value of GAIN is set to PARAMETER.</p>
<p>Increase (Linear): GAIN slides to 1 with additions of 1/64.</p>
<p>Increase (Bent Line): GAIN slides up with additions of 1/64 until it reaches 3/4, then it slides up to 1 with additions of 1/256.</p>
<p>Decrease (Linear): GAIN slides down to 0 with subtractions of 1/64.</p>
<p>Decrease (Exponential): GAIN slides down exponentially by getting multiplied by 255/256.</p>
<p>Table 2.3 Gain Parameters (Increate <code>0 -&gt; 1</code> / Decrease <code>1 -&gt; 0</code>):</p>
<table>
<thead>
<tr>
<th>Parameter Value</th>
<th>Increase Linear</th>
<th>Increase Bentline</th>
<th>Decrease Linear</th>
<th>Decrease Exponential</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>00</code></td>
<td>INFINITE</td>
<td>INFINITE</td>
<td>INFINITE</td>
<td>INFINITE</td>
</tr>
<tr>
<td><code>01</code></td>
<td>4.1s</td>
<td>7.2s</td>
<td>4.1s</td>
<td>38s</td>
</tr>
<tr>
<td><code>02</code></td>
<td>3.1s</td>
<td>5.4s</td>
<td>3.1s</td>
<td>28s</td>
</tr>
<tr>
<td><code>03</code></td>
<td>2.6s</td>
<td>4.6s</td>
<td>2.6s</td>
<td>24s</td>
</tr>
<tr>
<td><code>04</code></td>
<td>2.0s</td>
<td>3.5s</td>
<td>2.0s</td>
<td>19s</td>
</tr>
<tr>
<td><code>05</code></td>
<td>1.5s</td>
<td>2.6s</td>
<td>1.5s</td>
<td>14s</td>
</tr>
<tr>
<td><code>06</code></td>
<td>1.3s</td>
<td>2.3s</td>
<td>1.3s</td>
<td>12s</td>
</tr>
<tr>
<td><code>07</code></td>
<td>1.0s</td>
<td>1.8s</td>
<td>1.0s</td>
<td>9.4s</td>
</tr>
<tr>
<td><code>08</code></td>
<td>770ms</td>
<td>1.3s</td>
<td>770ms</td>
<td>7.1s</td>
</tr>
<tr>
<td><code>09</code></td>
<td>640ms</td>
<td>1.1s</td>
<td>640ms</td>
<td>5.9s</td>
</tr>
<tr>
<td><code>0A</code></td>
<td>510ms</td>
<td>900ms</td>
<td>510ms</td>
<td>4.7s</td>
</tr>
<tr>
<td><code>0B</code></td>
<td>380ms</td>
<td>670ms</td>
<td>380ms</td>
<td>3.5s</td>
</tr>
<tr>
<td><code>0C</code></td>
<td>320ms</td>
<td>560ms</td>
<td>320ms</td>
<td>2.9s</td>
</tr>
<tr>
<td><code>0D</code></td>
<td>260ms</td>
<td>450ms</td>
<td>260ms</td>
<td>2.4s</td>
</tr>
<tr>
<td><code>0E</code></td>
<td>190ms</td>
<td>340ms</td>
<td>190ms</td>
<td>1.8s</td>
</tr>
<tr>
<td><code>0F</code></td>
<td>160ms</td>
<td>280ms</td>
<td>160ms</td>
<td>1.5s</td>
</tr>
<tr>
<td><code>10</code></td>
<td>130ms</td>
<td>220ms</td>
<td>130ms</td>
<td>1.2s</td>
</tr>
<tr>
<td><code>11</code></td>
<td>96ms</td>
<td>170ms</td>
<td>96ms</td>
<td>880ms</td>
</tr>
<tr>
<td><code>12</code></td>
<td>80ms</td>
<td>140ms</td>
<td>80ms</td>
<td>740ms</td>
</tr>
<tr>
<td><code>13</code></td>
<td>64ms</td>
<td>110ms</td>
<td>64ms</td>
<td>590ms</td>
</tr>
<tr>
<td><code>14</code></td>
<td>48ms</td>
<td>84ms</td>
<td>48ms</td>
<td>440ms</td>
</tr>
<tr>
<td><code>15</code></td>
<td>40ms</td>
<td>70ms</td>
<td>40ms</td>
<td>370ms</td>
</tr>
<tr>
<td><code>16</code></td>
<td>32ms</td>
<td>56ms</td>
<td>32ms</td>
<td>290ms</td>
</tr>
<tr>
<td><code>17</code></td>
<td>24ms</td>
<td>42ms</td>
<td>24ms</td>
<td>220ms</td>
</tr>
<tr>
<td><code>18</code></td>
<td>20ms</td>
<td>35ms</td>
<td>20ms</td>
<td>180ms</td>
</tr>
<tr>
<td><code>19</code></td>
<td>16ms</td>
<td>28ms</td>
<td>16ms</td>
<td>150ms</td>
</tr>
<tr>
<td><code>1A</code></td>
<td>12ms</td>
<td>21ms</td>
<td>12ms</td>
<td>110ms</td>
</tr>
<tr>
<td><code>1B</code></td>
<td>10ms</td>
<td>18ms</td>
<td>10ms</td>
<td>92ms</td>
</tr>
<tr>
<td><code>1C</code></td>
<td>8ms</td>
<td>14ms</td>
<td>8ms</td>
<td>74ms</td>
</tr>
<tr>
<td><code>1D</code></td>
<td>6ms</td>
<td>11ms</td>
<td>6ms</td>
<td>55ms</td>
</tr>
<tr>
<td><code>1E</code></td>
<td>4ms</td>
<td>7ms</td>
<td>4ms</td>
<td>37ms</td>
</tr>
<tr>
<td><code>1F</code></td>
<td>2ms</td>
<td>3.5ms</td>
<td>2ms</td>
<td>18ms</td>
</tr>
</tbody>
</table>
<h3 id="toc-53">DSP Voice Register: ENVX</h3>
<p>ENVX gets written to by the DSP. It contains the present ADSR/GAIN envelope value.</p>
<pre><code class="hljs ruby">ENVX
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x8   <span class="hljs-params">|  0  |</span>                 VALUE                   <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

7-bit unsigned value
</span></code></pre>
<h3 id="toc-54">DSP Voice Register: OUTX</h3>
<p>OUTX is written to by the DSP. It contains the present wave height multiplied by the ADSR/GAIN envelope value. It isn't multiplied by the voice volume though.</p>
<pre><code class="hljs ruby">OUTX
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$x9   <span class="hljs-params">| sign|</span>                 VALUE                   <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

8-bit signed value
</span></code></pre>
<h3 id="toc-55">DSP Register: MVOL/EVOL</h3>
<p>Main/Echo volume! 8-bit signed values. Regular sound is scaled by the main volume. Echoed sound is scaled by the echo volume.</p>
<p>I also had a problem with writing to these registers, sometimes my writes would get ignored, or zeroed?</p>
<pre><code class="hljs ruby">         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$0C   <span class="hljs-params">| sign|</span>         Left Output Main Volume         <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$1C   |</span> sign<span class="hljs-params">|        Right Output Main Volume         |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+

         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$2C   <span class="hljs-params">| sign|</span>         Left Output Echo Volume         <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+

         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$3C   |</span> sign<span class="hljs-params">|        Right Output Echo Volume         |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<h3 id="toc-56">DSP Registers: KON/KOF</h3>
<p>Writing bits to KON will start/restart the voice specified. Writing bits to KOF will cause the voice to fade out. The fade is done with subtraction of 1/256 values and takes about 8msec.</p>
<p>It is said that you should not write to KON/KOF in succession, you have to wait a little while (a few NOPs).</p>
<pre><code class="hljs ruby">Key-On
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$4C   <span class="hljs-params">|VOIC7|</span>VOIC6<span class="hljs-params">|VOIC5|</span>VOIC4<span class="hljs-params">|VOIC3|</span>VOIC2<span class="hljs-params">|VOIC1|</span>VOIC<span class="hljs-number">0</span><span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
Key-Off
         7     6     5     4     3     2     1     0
      +-----+-----+-----+-----+-----+-----+-----+-----+
$5C   |</span>VOIC7<span class="hljs-params">|VOIC6|</span>VOIC5<span class="hljs-params">|VOIC4|</span>VOIC3<span class="hljs-params">|VOIC2|</span>VOIC1<span class="hljs-params">|VOIC0|</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<h3 id="toc-57">DSP Register: FLG</h3>
<pre><code class="hljs ruby">Flags
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$6C   <span class="hljs-params">|RESET|</span>MUTE <span class="hljs-params">|~ECEN|</span>         NOISE CLOCK         <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>RESET: Soft reset. Writing a '1' here will set all voices in a state of "Key-On suspension" (???). MUTE is also set. A soft-reset gets triggered upon power-on.</p>
<p>MUTE: Mutes all channel output.</p>
<p>ECEN: ~Echo enable. A '0' here enables echo data to be written into external memory (the memory your program/data is in!). Be careful when enabling it, it's quite easy to crash your program with the echo hardware!</p>
<p>NOISE CLOCK: Designates the frequency for the white noise.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Frequency</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>00</code></td>
<td>0 Hz</td>
</tr>
<tr>
<td><code>01</code></td>
<td>16 Hz</td>
</tr>
<tr>
<td><code>02</code></td>
<td>21 Hz</td>
</tr>
<tr>
<td><code>03</code></td>
<td>25 Hz</td>
</tr>
<tr>
<td><code>04</code></td>
<td>31 Hz</td>
</tr>
<tr>
<td><code>05</code></td>
<td>42 Hz</td>
</tr>
<tr>
<td><code>06</code></td>
<td>50 Hz</td>
</tr>
<tr>
<td><code>07</code></td>
<td>63 Hz</td>
</tr>
<tr>
<td><code>08</code></td>
<td>83 Hz</td>
</tr>
<tr>
<td><code>09</code></td>
<td>100 Hz</td>
</tr>
<tr>
<td><code>0A</code></td>
<td>125 Hz</td>
</tr>
<tr>
<td><code>0B</code></td>
<td>167 Hz</td>
</tr>
<tr>
<td><code>0C</code></td>
<td>200 Hz</td>
</tr>
<tr>
<td><code>0D</code></td>
<td>250 Hz</td>
</tr>
<tr>
<td><code>0E</code></td>
<td>333 Hz</td>
</tr>
<tr>
<td><code>0F</code></td>
<td>400 Hz</td>
</tr>
<tr>
<td><code>10</code></td>
<td>500 Hz</td>
</tr>
<tr>
<td><code>11</code></td>
<td>667 Hz</td>
</tr>
<tr>
<td><code>12</code></td>
<td>800 Hz</td>
</tr>
<tr>
<td><code>13</code></td>
<td>1.0 KHz</td>
</tr>
<tr>
<td><code>14</code></td>
<td>1.3 KHz</td>
</tr>
<tr>
<td><code>15</code></td>
<td>1.6 KHz</td>
</tr>
<tr>
<td><code>16</code></td>
<td>2.0 KHz</td>
</tr>
<tr>
<td><code>17</code></td>
<td>2.7 KHz</td>
</tr>
<tr>
<td><code>18</code></td>
<td>3.2 KHz</td>
</tr>
<tr>
<td><code>19</code></td>
<td>4.0 KHz</td>
</tr>
<tr>
<td><code>1A</code></td>
<td>5.3 KHz</td>
</tr>
<tr>
<td><code>1B</code></td>
<td>6.4 KHz</td>
</tr>
<tr>
<td><code>1C</code></td>
<td>8.0 KHz</td>
</tr>
<tr>
<td><code>1D</code></td>
<td>10.7 KHz</td>
</tr>
<tr>
<td><code>1E</code></td>
<td>16 KHz</td>
</tr>
<tr>
<td><code>1F</code></td>
<td>32 KHz</td>
</tr>
</tbody>
</table>
<h3 id="toc-58">DSP Register: ENDX</h3>
<p>This register is written to during DSP activity.</p>
<p>Each voice gets 1 bit. If the bit is set then it means the BRR decoder has reached the last compressed block in the sample.</p>
<pre><code class="hljs ruby">ENDX
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$7C   <span class="hljs-params">|VOIC7|</span>VOIC6<span class="hljs-params">|VOIC5|</span>VOIC4<span class="hljs-params">|VOIC3|</span>VOIC2<span class="hljs-params">|VOIC1|</span>VOIC<span class="hljs-number">0</span><span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<h3 id="toc-59">DSP Register: EFB</h3>
<p>Writing to this register sets the Echo Feedback. It's an 8-bit signed value. Some more information on how the feedback works would be nice.</p>
<pre><code class="hljs ruby">EFB
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$0D   <span class="hljs-params">| sign|</span>             Echo Feedback               <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<h3 id="toc-60">DSP Register: PMON</h3>
<pre><code class="hljs ruby">PMON
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$2D   <span class="hljs-params">|VOIC7|</span>VOIC6<span class="hljs-params">|VOIC5|</span>VOIC4<span class="hljs-params">|VOIC3|</span>VOIC2<span class="hljs-params">|VOIC1|</span>  -  <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>Pitch modulation multiplies the current pitch of the channel by OUTX of the previous channel. <code>(P (modulated) = P[X] * (1 + OUTX[X-1])</code></p>
<p>So a sine wave in the previous channel would cause some vibrato on the modulated channel. Note that OUTX is before volume multiplication, so you can have a silent channel for modulating.</p>
<h3 id="toc-61">DSP Register: NON</h3>
<p>Noise enable.</p>
<pre><code class="hljs ruby">NON
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$3D   <span class="hljs-params">|VOIC7|</span>VOIC6<span class="hljs-params">|VOIC5|</span>VOIC4<span class="hljs-params">|VOIC3|</span>VOIC2<span class="hljs-params">|VOIC1|</span>VOIC<span class="hljs-number">0</span><span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>When the noise enable bit is specified for a certain channel, white noise is issued instead of sample data. The frequency of the white noise is set in the FLG register. The white noise still requires a (dummy) sample to determine the length of sound (or unlimited sound if the sample loops).</p>
<h3 id="toc-62">DSP Register: EON</h3>
<p>Echo enable.</p>
<pre><code class="hljs ruby">EON
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$4D   <span class="hljs-params">|VOIC7|</span>VOIC6<span class="hljs-params">|VOIC5|</span>VOIC4<span class="hljs-params">|VOIC3|</span>VOIC2<span class="hljs-params">|VOIC1|</span>VOIC<span class="hljs-number">0</span><span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>This register enables echo effects for the specified channel(s).</p>
<h3 id="toc-63">DSP Register: DIR</h3>
<p>Source Directory Offset.</p>
<pre><code class="hljs ruby">DIR
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$5D   <span class="hljs-params">|                  Offset value                 |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<p>This register points to the source(sample) directory in external RAM. The pointer is calculated by Offset*<code>100h</code>.</p>
<p>The source directory contains sample start and loop point offsets. Its a simple array of 16-bit values.</p>
<pre><code class="hljs armasm"><span class="hljs-symbol">SAMPLE</span> DIRECTORY

<span class="hljs-symbol">OFFSET</span>  SIZE    DESC
<span class="hljs-symbol">dir</span>+<span class="hljs-number">0</span>   <span class="hljs-number">16</span>-<span class="hljs-keyword">BIT </span> SAMPLE-<span class="hljs-number">0</span> START
<span class="hljs-symbol">dir</span>+<span class="hljs-number">2</span>   <span class="hljs-number">16</span>-<span class="hljs-keyword">BIT </span> SAMPLE-<span class="hljs-number">0</span> LOOP START
<span class="hljs-symbol">dir</span>+<span class="hljs-number">4</span>   <span class="hljs-number">16</span>-<span class="hljs-keyword">BIT </span> SAMPLE-<span class="hljs-number">1</span> START
<span class="hljs-symbol">dir</span>+<span class="hljs-number">6</span>   <span class="hljs-number">16</span>-<span class="hljs-keyword">BIT </span> SAMPLE-<span class="hljs-number">1</span> LOOP START
<span class="hljs-symbol">dir</span>+<span class="hljs-number">8</span>   <span class="hljs-number">16</span>-<span class="hljs-keyword">BIT </span> SAMPLE-<span class="hljs-number">2</span> START
<span class="hljs-symbol">...</span>
<span class="hljs-symbol">This</span> can continue for up to <span class="hljs-number">256</span> samples. (SRCN can only reference <span class="hljs-number">256</span> samples)
</code></pre>
<h3 id="toc-64">DSP Register: ESA</h3>
<p>Echo data start address.</p>
<pre><code class="hljs ruby">ESA
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$6D   <span class="hljs-params">|                  Offset value                 |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<p>This register points to an area of memory to be used by the echo buffer. Like <code>DIR</code> its value is multiplied by <code>100h</code>.</p>
<h3 id="toc-65">DSP Register: EDL</h3>
<p>Echo delay size.</p>
<pre><code class="hljs ruby">EDL
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$7D   <span class="hljs-params">|  -  |</span>  -  <span class="hljs-params">|  -  |</span>  -  <span class="hljs-params">|      Echo Delay       |</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
</code></pre>
<p>EDL specifies the delay between the main sound and the echoed sound. The delay is calculated as EDL * 16ms.</p>
<p>Increased amounts of delay require more memory. The amount of memory required is EDL * 2KBytes (MAX $7800 bytes). The memory region used will be <code>[ESA*100h] -&gt; [ESA*100h + EDL*800h -1]</code>. If <code>EDL</code> is zero, 4 bytes of memory at <code>[ESA*100h] -&gt; [ESA*100h + 3]</code> will still be used.</p>
<h3 id="toc-66">DSP Register: COEF</h3>
<p>Echo FIR filter coefficients.</p>
<pre><code class="hljs ruby">COEF
         <span class="hljs-number">7</span>     <span class="hljs-number">6</span>     <span class="hljs-number">5</span>     <span class="hljs-number">4</span>     <span class="hljs-number">3</span>     <span class="hljs-number">2</span>     <span class="hljs-number">1</span>     <span class="hljs-number">0</span>
      +-----+-----+-----+-----+-----+-----+-----+-----+
$xF   <span class="hljs-params">| sign|</span>         Filter Coefficient X            <span class="hljs-params">|
      +-----+-----+-----+-----+-----+-----+-----+-----+
</span></code></pre>
<p>The 8-bytes at <code>$0F,$1F,$2F,$3F,$4F,$5F,$6F,$7F</code> are used by the 8-tap FIR filter. I really have no idea how FIR filters work... but the filter is applied to the echo output.</p>
<h3 id="toc-67">DSP Echo Function</h3>
<p>Ah, the spotlight of SPC music, the echoing! A short review of the registers used:</p>
<p>EVOL: This is the volume multiplier of the echo output. Note that even if the Main volume is 0, the echo volume can still be heard. It is independant from the main volume.</p>
<p>FLG: Flags register. The "Echo Enable" bit is contained in here.</p>
<p>EFB: Echo Feedback. This is an 8-bit signed value used for feedback multiplication.</p>
<p>EON: Echo Channel Enable. One bit per channel to indicate that it should be echoed.</p>
<p>ESA: Echo Start Address. A pointer to the area of memory designated for the echoing buffer.</p>
<p>EDL: Echo Delay. 4-bit value that designates both the delay time for the echo, and the size of the echoing buffer. (d<em>16ms time) (d</em>2KB memory)</p>
<p>COEF: Echo FIR Filter Coefficients. Again, I have no idea how the filter works. A setting of 127,0,0,0,0,0,0,0 will result in the original sound.</p>
<p>To enable echoing:</p>
<pre><code class="hljs armasm"><span class="hljs-symbol">Initialization</span>, order of operation is not of concern
*. Set ESA to memory region to <span class="hljs-keyword">be </span>used.
*. Set EDL to desired echo delay. You will <span class="hljs-meta">require</span> <span class="hljs-number">2</span>KB*EDL of <span class="hljs-meta">space</span> for the echoing <span class="hljs-keyword">buffer.
</span>*. Set the filter coefficients. A setting of <span class="hljs-number">127</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span> won<span class="hljs-string">'t affect the sound output.
*. Set Echo Feedback.
*. Enable echo for desired channels (EON).

Startup:
1. Delay 240ms ***see below***.
2. Set EVOL to desired volume.
3. Write '</span><span class="hljs-number">0</span><span class="hljs-string">' to the ECEN bit in the FLG register.
4. Echo is enabled.
5. Freely change all parameters (except ESA,EDL).
</span></code></pre>
<p>*** This is because the echo hardware doesn't actually read the buffer designation values until it reaches the END of the old buffer! (the old buffer sizes could be uninitialized garbage). There is no way to determine the write position. 240ms is the max delay time, so it is the safe value to use. Another method is to read EDL (d) before you set it, and delay d*16ms.</p>
<p>Another special note: Echo writing DOES wrap around the memory edge, I had my program crash when the ESA was at the very end of memory (and I didn't delay properly). It wrote to the end... and then wrapped around to munch all my DP memory all the way to the program code.</p>
<p>PS: Lower your headphone volume when playing with the EFB register.</p>
<h3 id="toc-68">Precautions</h3>
<p><em>Don't use an excessive sound data compression ratio.</em><br>
Samples with low sample rates may cause distortion. And they don't convert to BRR very well.</p>
<p><em>Take care that the mixed output doesn't exceed the maximum waveform limit.</em><br>
If the mixed waveform (all 8-channels together) overflows, some distortion noise will be produced.</p>
<p><em>Check for monaural output!</em><br>
This will mess up your cool 'surreal' effect when your setting one side of the channel volume to negative.</p>
<p><em>Sustain continuous sample flow.</em><br>
Sampled data that isn't continuous will cause 'clicking' sounds to appear. A very obvious example is when you disable a channel by cutting the volume. A quick fade-out should be used instead.</p>
<h2 id="toc-8">IPL ROM</h2>
<p>The IPL ROM is a 64 byte image that is built into the SPC to handle data transfers from the SNES. This code is ran at power-on/reset. Here is the code for the IPL ROM:</p>
<pre><code class="hljs armasm"><span class="hljs-comment">; Commented SPC-700 IPL ROM</span>
<span class="hljs-comment">; by eKid</span>

<span class="hljs-comment">; Original dissasembly from SID-SPC written by Alfatech/Triad</span>

<span class="hljs-comment">; This code assembles with TASM</span>

<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
<span class="hljs-comment">; DEFINITIONS</span>
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>

<span class="hljs-symbol">WriteAdr</span>    =<span class="hljs-number">$00</span>    <span class="hljs-comment">; Write address during transfers</span>
<span class="hljs-symbol">Port0</span>       =$<span class="hljs-built_in">F4</span>    <span class="hljs-comment">; I/O ports</span>
<span class="hljs-symbol">Port1</span>       =$<span class="hljs-built_in">F5</span>
<span class="hljs-symbol">Port2</span>       =$<span class="hljs-built_in">F6</span>
<span class="hljs-symbol">Port3</span>       =$<span class="hljs-built_in">F7</span>

<span class="hljs-symbol">.ORG</span> $FFC0
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
<span class="hljs-symbol">Start</span>:
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>

<span class="hljs-comment">; set stack pointer to $EF</span>
<span class="hljs-comment">;   "why EF? page1 has 256 memory bytes!"</span>
<span class="hljs-comment">;   because the value in X is reused in the page0 clear (saves 2 bytes)</span>
<span class="hljs-comment">;   the higher 16 bytes of page0 contain hardware registers.</span>

    <span class="hljs-keyword">mov </span>x, #$EF
    <span class="hljs-keyword">mov </span><span class="hljs-built_in">sp</span>, x

<span class="hljs-comment">; clear zero-page memory</span>

    <span class="hljs-keyword">mov </span>a, #<span class="hljs-number">$00</span>
<span class="hljs-symbol">clrpg0</span>: <span class="hljs-keyword">mov </span>(x), a
    dec x
    <span class="hljs-keyword">bne </span>clrpg0

<span class="hljs-comment">; indicate ready signal, write 0BBAAh to ports 0/1</span>

    <span class="hljs-keyword">mov </span>Port0, #$AA
    <span class="hljs-keyword">mov </span>Port1, #$<span class="hljs-keyword">BB
</span>
<span class="hljs-comment">; idle until the SNES sends the transfer signal to port0 ($CC)</span>
<span class="hljs-comment">; and then process data</span>
<span class="hljs-symbol">
wait1:</span>  <span class="hljs-keyword">cmp </span>$<span class="hljs-built_in">F4</span>, #$CC
    <span class="hljs-keyword">bne </span>wait1

    <span class="hljs-keyword">bra </span>ProcessData

<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
<span class="hljs-symbol">TransferData</span>:
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>

<span class="hljs-comment">; wait until Port0 gets zero written to it</span>
<span class="hljs-symbol">
wait2:</span>  <span class="hljs-keyword">mov </span>y, Port0
    <span class="hljs-keyword">bne </span>wait2

<span class="hljs-comment">; this is the main transfer loop</span>
<span class="hljs-symbol">
transfer_bytes:</span>
    <span class="hljs-keyword">cmp </span>y, Port0    <span class="hljs-comment">; check for data</span>
    <span class="hljs-keyword">bne </span>check_end

    <span class="hljs-keyword">mov </span>a, Port1    <span class="hljs-comment">; read byte of data</span>
    <span class="hljs-keyword">mov </span>Port0, y    <span class="hljs-comment">; reply to SNES (snes can write new data now)</span>
    <span class="hljs-keyword">mov </span>[WriteAdr]+Y, A <span class="hljs-comment">; write data to memory</span>
    inc y       <span class="hljs-comment">; increment index</span>
    <span class="hljs-keyword">bne </span>transfer_bytes  <span class="hljs-comment">; loop</span>

<span class="hljs-comment">; index overflowed, increment high byte of WriteAdr</span>
    inc WriteAdr+<span class="hljs-number">1</span>
<span class="hljs-symbol">
check_end:</span>

<span class="hljs-comment">; if y - port0 &lt; 0 then the transfer is complete (SNES added 2 or more)</span>

    <span class="hljs-keyword">bpl </span>transfer_bytes

<span class="hljs-comment">; confirm this! we may have checked with invalid data</span>
<span class="hljs-comment">; also, this is used when the "inc WriteAdr+1" path is taken</span>
<span class="hljs-comment">;         (when transferring to $8000 or higher)</span>

    <span class="hljs-keyword">cmp </span>y, Port0
    <span class="hljs-keyword">bpl </span>transfer_bytes

<span class="hljs-comment">; transfer is finished, process data again</span>

<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
<span class="hljs-symbol">ProcessData</span>:
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>

<span class="hljs-comment">; read word from ports 2/3</span>
<span class="hljs-comment">; word may be data write address,</span>
<span class="hljs-comment">; or program entry point (depending on port0)</span>

    <span class="hljs-keyword">movw </span>   ya, Port2
    <span class="hljs-keyword">movw </span>   WriteAdr, ya
    <span class="hljs-keyword">movw </span>   ya, $<span class="hljs-built_in">F4</span>
    <span class="hljs-keyword">mov </span>Port0, a    <span class="hljs-comment">; reply to SNES with PT0 data</span>
    <span class="hljs-keyword">mov </span>a, y
    <span class="hljs-keyword">mov </span>x, a

<span class="hljs-comment">; if port1 wasn't zero, then start the transfer</span>

    <span class="hljs-keyword">bne </span>TransferData

<span class="hljs-comment">; otherwise...</span>
<span class="hljs-comment">; jump to program entry point</span>
<span class="hljs-comment">; X is zero in this case, so this</span>
<span class="hljs-comment">; is an effective "movw pc, WriteAdr"</span>
    jmp [WriteAdr+X]

<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
<span class="hljs-symbol">ResetVector</span>:
<span class="hljs-comment">;-------------------------------------------------------------------------------</span>
    di
    stop

<span class="hljs-comment">; When program flow is passed to the user code, the Accumulator</span>
<span class="hljs-comment">; and X/Y index registers are zero, and the SP is initialized to $EF.</span>
<span class="hljs-comment">; Also, page0 memory is cleared. (EXCEPT for the word at $00)</span>

<span class="hljs-symbol">.end</span>
</code></pre>
<h2 id="toc-9">Uploading Software</h2>
<p>Here is the upload protocol:</p>
<pre><code class="hljs ruby">SPC SIDE     <span class="hljs-params">|   SNES SIDE
---------------------------------------------------
PORT0=0AAh  &gt;&gt;&gt;                                    |</span> Stage <span class="hljs-number">1</span>, <span class="hljs-string">"is the spc ready to receive data??"</span>
PORT1=0BBh  <span class="hljs-meta">&gt;&gt;&gt;  </span>Confirm 0AABBh                    <span class="hljs-params">|
---------------------------------------------------
            &lt;&lt;&lt;  PORT1 = NOT0                      |</span> Stage <span class="hljs-number">2</span>, initialize transfer
            &lt;&lt;&lt;  PORT2/<span class="hljs-number">3</span> = TRANSFER ADDRESS LO/HI  <span class="hljs-params">|
            &lt;&lt;&lt;  PORT0 = 0CCh                      |</span>
PORT<span class="hljs-number">0</span>=PT<span class="hljs-number">0</span>   <span class="hljs-meta">&gt;&gt;&gt;  </span>(confirm this)                    <span class="hljs-params">| PT0 is data received <span class="hljs-keyword">in</span> port0 on the SPC side
---------------------------------------------------|</span> the spc will mimic stuff you put in port<span class="hljs-number">0</span>
                DATA TRANSFER START                <span class="hljs-params">|
---------------------------------------------------|</span>
            &lt;&lt;&lt;  PORT1 = FIRST BYTE OF DATA        <span class="hljs-params">| Stage 3, start transfer
            &lt;&lt;&lt;  PORT0 = 00h                       |</span>
PORT<span class="hljs-number">0</span>=PT<span class="hljs-number">0</span>   <span class="hljs-meta">&gt;&gt;&gt;  </span>(confirm this)                    <span class="hljs-params">|
---------------------------------------------------
            &lt;&lt;&lt;  PORT1 = DATA                      |</span> Stage <span class="hljs-number">4</span>, transfer data
            &lt;&lt;&lt;  PORT<span class="hljs-number">0</span> = LAST PORT<span class="hljs-number">0</span> DATA +<span class="hljs-number">1</span>        <span class="hljs-params">|
PORT0=PT0   &gt;&gt;&gt;  (confirm this)                    |</span>
--------------------------------------------------------
Sending the <span class="hljs-keyword">next</span> block...                               <span class="hljs-params">|
            &lt;&lt;&lt;  PORT1 = NOT 0                          |</span> Stage <span class="hljs-number">5</span>, <span class="hljs-keyword">next</span> block
            &lt;&lt;&lt;  PORT2/<span class="hljs-number">3</span> = TRANSFER ADDRESS             <span class="hljs-params">|
            &lt;&lt;&lt;  PORT0 = PREVIOUS PORT0 DATA + 2 to 127 |</span> <span class="hljs-symbol">NOTE:</span> this value cannot be zero, add another <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> so <span class="hljs-keyword">if</span> it is
PORT<span class="hljs-number">0</span>=PT<span class="hljs-number">0</span>   <span class="hljs-meta">&gt;&gt;&gt;  </span>(confirm this)                         <span class="hljs-params">|
                 jump to DATA TRANSFER START            |</span>
------------------------------------------------------------
After the last block...                                     <span class="hljs-params">|  Stage 6, start program
            &lt;&lt;&lt;  PORT1 = 0                                  |</span>
            &lt;&lt;&lt;  PORT2/<span class="hljs-number">3</span> = PROGRAM ENTRY POINT              <span class="hljs-params">|
            &lt;&lt;&lt;  PORT0 = PREVIOUS PORT0 DATA + 2 to 127     |</span>
PORT<span class="hljs-number">0</span>=PT<span class="hljs-number">0</span>   <span class="hljs-meta">&gt;&gt;&gt;  </span>(confirm this)                             <span class="hljs-params">|
                 (assume the code is running successfully)  |</span>
------------------------------------------------------------
</code></pre>
<p>Warning! If this routine is interrupted, the SPC may time-out! (or something) Your program will then get stuck in an infinite loop of waiting for the SPC reply. Inhibit interrupts during the transfer protocol.</p>
<p>Have a look at my booting procedure (does not support multiple blocks):</p>
<pre><code class="hljs ruby">;--------------------------------------------
<span class="hljs-symbol">snakBoot:</span>
;--------------------------------------------

; wait <span class="hljs-keyword">for</span> ready signal

-   ldx REG_APUI0<span class="hljs-number">0</span>
    cpx <span class="hljs-comment">#0BBAAh</span>
    bne -

; start <span class="hljs-symbol">transfer:</span>
; port1   = !<span class="hljs-number">0</span>
; port2/<span class="hljs-number">3</span> = transfer address ( <span class="hljs-number">0200</span>h )
; port<span class="hljs-number">0</span>   = 0CCh

    lda <span class="hljs-comment">#1</span>
    sta REG_APUI01
    inc a
    stz REG_APUI02
    sta REG_APUI03

    lda <span class="hljs-comment">#0CCh</span>
    sta REG_APUI0<span class="hljs-number">0</span>

; wait <span class="hljs-keyword">for</span> SPC

-   cmp REG_APUI0<span class="hljs-number">0</span>
    bne -

; ready to transfer...

    lda.w   snakd_binary    ; read first byte
    xba
    lda <span class="hljs-comment">#0</span>
    ldx <span class="hljs-comment">#1</span>
    bra sb_start

; transfer bytes

<span class="hljs-symbol">sb_send:</span>
    xba

    lda.w   snakd_binary,x  ; read byte
    inx
    xba
-   cmp REG_APUI0<span class="hljs-number">0</span>
    bne -

    ina         ; add <span class="hljs-number">1</span> to counter

<span class="hljs-symbol">sb_start:</span>
    rep <span class="hljs-comment">#20h</span>
    sta REG_APUI0<span class="hljs-number">0</span>  ; write to port1
    sep <span class="hljs-comment">#20h</span>

    cpx <span class="hljs-comment">#snakd_size ; all bytes transferred?</span>
    bcc sb_send     ; no, <span class="hljs-keyword">then</span> send <span class="hljs-keyword">next</span> byte

; all bytes transferred

-   cmp REG_APUI0<span class="hljs-number">0</span>  ; sync
    bne -

    ina         ; add <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> so...
    ina

    stz REG_APUI01  ; port1=<span class="hljs-number">0</span>
    ldx <span class="hljs-comment">#0200h      ; write program entry point</span>
    stx REG_APUI02
    sta REG_APUI0<span class="hljs-number">0</span>  ; write validation

-   cmp REG_APUI0<span class="hljs-number">0</span>  ; final sync
    bne -

; snakdriver is installed

    rtl
</code></pre>
<ol>
<li>Wait for the word in ports0/1 to read <code>BBAA</code></li>
<li>Write a nonzero value in port1 and the transfer address in ports 2/3.</li>
<li>Write 0CCh to port0.</li>
<li>Wait for the SPC to mimic the data it receives in port0 (0CCh in this case). The loader only uses port0 for replies.</li>
<li>Start a counter at 00h, write the first byte of data to port1, and write the counter to port0.</li>
<li>Wait for the SPC to reply with 00h (yes, it mimics).</li>
<li>Write the next data byte to port1, increment the counter, write the counter to port0.</li>
<li>Wait for the SPC to reply with the counter value.</li>
<li>Goto 7 if there are more bytes to be transferred.</li>
<li>Write 0 to port1, the program entry point to port2/3, and then finally... add 2 (or more) to the counter and write to port0.</li>
<li>(Optional) Wait for the SPC to mimic that last byte...</li>
</ol>
<p><strong>Based on SPCTECH by eKid (EFNet - <code>#snesdev</code>) and Anomie's docs.</strong></p>
        </article>
      </main>
    </div>
    <div class="row actions">
      <main class="col-sm-12">
        <a class="button" href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference/edit" title="Edit">‚úèÔ∏è Edit</a>
        <a class="button" href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference/history" title="View Document Edit History">üìï View History</a>
        
      </main>
    </div>
    
    <div class="row bottom">
      <main class="col-sm-12">
        <div class="row content-sections">
          <div class="col-sm-4">
            <div class="section">
              <h2>Related Documents</h2>
              
              <ul class="related-documents">
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/65816-reference" title="65816 Reference">65816 Reference</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/backgrounds" title="Backgrounds">Backgrounds</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/bit-rate-reduction-(brr)" title="Bit Rate Reduction (BRR)">Bit Rate Reduction (BRR)</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/capcom-cx4-hitachi-hg51b169" title="Capcom Cx4 - Hitachi HG51B169">Capcom Cx4 - Hitachi HG51B169</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/capcom-music-format" title="Capcom Music Format">Capcom Music Format</a>
                </li>
                
              </ul>
              
            </div>
          </div>
          <div class="col-sm-4">
            <div class="section">
              <h2>Recent Documents</h2>
              
              <ul class="recent-documents">
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc-and-rsn-file-format" title="SPC and RSN File Format">SPC and RSN File Format</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/kids-coloring" title="Kids Coloring">Kids Coloring</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/test" title="test">test</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/schematics-ports-and-pinouts" title="Schematics, Ports, and Pinouts">Schematics, Ports, and Pinouts</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/breath-of-fire-2" title="Breath of Fire 2">Breath of Fire 2</a>
                </li>
                
              </ul>
              
            </div>
          </div>
          <div class="col-sm-4">
            <div class="section">
              <h2>Popular Documents</h2>
              
              <ul class="popular-documents">
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/spc700-reference" title="SPC700 Reference">SPC700 Reference</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/registers" title="Registers">Registers</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/schematics-ports-and-pinouts" title="Schematics, Ports, and Pinouts">Schematics, Ports, and Pinouts</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/memory-mapping" title="Memory Mapping">Memory Mapping</a>
                </li>
                
                <li>
                  <a href="https://web.archive.org/web/20200518093038/https://wiki.superfamicom.org/65816-reference" title="65816 Reference">65816 Reference</a>
                </li>
                
              </ul>
              
            </div>
          </div>
        </div>
      </main>
    </div>
    
  </div>
</div>


<footer class="footer" role="contentinfo">
  <div class="container">
    <div class="row">
      ¬©2020 Super Famicom Development Wiki | üêå | üå∫ | <a href="https://web.archive.org/web/20200518093038/https://github.com/uttori" rel="external">Powered by Uttori Wiki</a>
    </div>
  </div>
</footer>
<script src="./SPC700 Reference _ Super Famicom Development Wiki_files/page.js.download"></script>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-315321-11', 'auto');
ga('send', 'pageview');
</script>
<script async="" src="./SPC700 Reference _ Super Famicom Development Wiki_files/analytics.js(1).download"></script>



<!--
     FILE ARCHIVED ON 09:30:38 May 18, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 11:04:59 Aug 05, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  load_resource: 190.123
  exclusion.robots.policy: 1.06
  RedisCDXSource: 276.016
  LoadShardBlock: 94.23 (3)
  esindex: 0.01
  PetaboxLoader3.resolve: 197.103 (2)
  exclusion.robots: 1.07
  captures_list: 400.999
  PetaboxLoader3.datanode: 39.096 (4)
  CDXLines.iter: 25.675 (3)
--></body></html>